{"ast":null,"code":"var _jsxFileName = \"/Users/Pravin/Study/nikhil/react/sample-app-web/src/components/LoginForm.jsx\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport { notification } from 'antd';\nimport { Formik, Form, Field } from 'formik';\nimport { LocalStream } from '@100mslive/hmsvideo-web';\nimport { updateInputDevices, SingleSelect, closeMediaStream, attachMediaStream, getRequest, deviceSupport, getUserMedia, getPermissionStatus } from '../utils';\nimport SoundMeter from './Settings/soundmeter';\nimport ArrowLeftIcon from 'mdi-react/ArrowLeftIcon';\nimport { ROLES } from '../constants';\nimport LoginTextField from './LoginTextField';\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"componentDidMount\", async () => {\n      console.log(`%c[APP] Role=${this.props.loginInfo.role}`);\n      this.setState({\n        isSupported: deviceSupport().supported\n      });\n      await this.updatePermission();\n      console.log({\n        permissionGranted: this.state.permissionGranted\n      }); //const { form } = this.props;\n\n      console.log('window.location:' + window.location);\n      console.log('url:' + window.location.protocol + window.location.host + '  ' + window.location.pathname + window.location.query); // if (!this.props.settings.codec) {\n      //   this.props.setSettings({\n      //     selectedAudioDevice: '',\n      //     selectedVideoDevice: '',\n      //     // selectedAudioOutputDevice: \"\",\n      //     resolution: 'qvga',\n      //     bandwidth: 256,\n      //     codec: 'vp8',\n      //     isDevMode: true,\n      //   });\n      // }\n\n      if (this.props.loginInfo.role === ROLES.LIVE_RECORD && this.props.loginInfo.roomId !== '') {\n        console.log(`%c[APP] Skipping audio & video permission promt for the live-record bot`, 'color: blue');\n        const handleLogin = this.props.handleLogin;\n        this.props.setLoginInfo({\n          displayName: null,\n          role: ROLES.LIVE_RECORD\n        });\n        handleLogin();\n        return;\n      } // ToDo: Show a confirmation dialog for ROLES.VIEWER\n\n\n      this.setState({\n        permissionText: 'We will need your permission to use your webcam and microphone.'\n      });\n\n      if (getRequest() && getRequest().hasOwnProperty('room') && this.props.loginInfo.displayName !== '' && this.props.loginInfo.roomId !== '' && this.props.loginInfo.env !== '') {\n        if (this.state.permissionGranted) {\n          console.log('Showing preview');\n          this.startPreview(true);\n        } else {\n          this.setState({\n            formStage: 'PERMISSION'\n          });\n        }\n      } else {\n        let formStage = 'ROOM';\n        console.log(`[FormStage: ${formStage}]`);\n\n        if (this.props.loginInfo.roomId != '') {\n          formStage = 'JOIN_ROOM';\n        }\n\n        this.setState({\n          formStage: formStage\n        });\n      }\n    });\n\n    _defineProperty(this, \"componentWillUnmount\", () => {\n      this._cleanup();\n    });\n\n    _defineProperty(this, \"_notification\", (message, description, type = 'info') => {\n      if (type == 'info') {\n        notification.info({\n          message: message,\n          description: description,\n          placement: 'bottomRight'\n        });\n      } else if (type == 'error') {\n        notification.error({\n          message: message,\n          description: description,\n          placement: 'bottomRight'\n        });\n      }\n    });\n\n    _defineProperty(this, \"_stopMediaStream\", async stream => {\n      let tracks = stream.getTracks();\n\n      for (let i = 0, len = tracks.length; i < len; i++) {\n        await tracks[i].stop();\n      }\n    });\n\n    _defineProperty(this, \"_cleanup\", async () => {\n      if (this.stream) {\n        await this._stopMediaStream(this.stream);\n        await this.client.unpublish(this.stream, this.client.rid);\n      }\n\n      if (this.client) await this.client.leave();\n    });\n\n    _defineProperty(this, \"updateDeviceList\", callback => {\n      updateInputDevices().then(data => {\n        if (this.props.settings.selectedAudioDevice === '' && data.audioDevices.length > 0) {\n          this.props.setSettings({\n            selectedAudioDevice: data.audioDevices[0].deviceId\n          });\n        }\n\n        if (this.props.settings.selectedVideoDevice === '' && data.videoDevices.length > 0) {\n          this.props.setSettings({\n            selectedVideoDevice: data.videoDevices[0].deviceId\n          });\n        } // if (\n        //   this.state.settings.selectedAudioOutputDevice === \"\" &&\n        //   data.audioOutputDevices.length > 0\n        // ) {\n        //   console.log(\"setting output device\")\n        //   this.state.settings.selectedAudioOutputDevice =\n        //     data.audioOutputDevices[0].deviceId\n        // }\n\n\n        this.setState({\n          videoDevices: data.videoDevices,\n          audioDevices: data.audioDevices,\n          audioOutputDevices: data.audioOutputDevices\n        });\n\n        if (callback) {\n          callback();\n        }\n      });\n    });\n\n    _defineProperty(this, \"handleCreateSubmit\", async values => {\n      const endpoint = process.env.NEXT_PUBLIC_CREATE_ROOM_ENDPOINT || '/api/room';\n      console.log('endpoint', endpoint);\n      console.log('Create Room values: ', values);\n      const response = await fetch(endpoint, {\n        method: 'POST',\n        body: JSON.stringify({\n          room_name: values.roomName,\n          recording_info: {\n            enabled: values.isRecording\n          },\n          env: values.env\n        })\n      }).catch(err => {\n        console.log('Error', err);\n      });\n      console.log('Response: ', response);\n\n      if (response.status != 200) {\n        const data = await response.json();\n\n        this._notification('Error', data.message, 'error');\n      } else {\n        const roomEntry = await response.json();\n        console.log('response:', roomEntry);\n        values.roomId = roomEntry.id;\n\n        this._notification('Room Created', `Room Id: ${values.roomId} Room Name: ${values.roomName}`);\n\n        this.handleNameSubmit(values);\n      }\n    });\n\n    _defineProperty(this, \"handleJoinSubmit\", values => {\n      // TODO: How to get roomName from roomId\n      this.handleNameSubmit(values);\n    });\n\n    _defineProperty(this, \"handleNameSubmit\", values => {\n      console.log(this.state.permissionGranted);\n      this.props.setLoginInfo({\n        roomId: values.roomId\n      });\n\n      if (values.roomName) {\n        this.props.setLoginInfo({\n          roomName: values.roomName\n        });\n      }\n\n      if (values.role) {\n        this.props.setLoginInfo({\n          role: values.role\n        });\n      }\n\n      if (values.env) {\n        this.props.setLoginInfo({\n          env: values.env\n        });\n      }\n\n      if (values.displayName) {\n        this.props.setLoginInfo({\n          displayName: values.displayName\n        });\n      }\n\n      if (this.props.loginInfo.role === ROLES.VIEWER) {\n        this.props.handleLogin();\n      } else if (this.state.permissionGranted) {\n        console.log('Showing preview');\n        this.startPreview(true);\n      } else {\n        this.setState({\n          formValues: values,\n          formStage: 'PERMISSION'\n        });\n      }\n    });\n\n    _defineProperty(this, \"handleSubmit\", values => {\n      const handleLogin = this.props.handleLogin;\n      console.log('Values in handleSubmit: ', values);\n      console.log('this.props.loginInfo.roomId in handleSubmit: ', this.props.loginInfo.roomId);\n      if (values.role) this.props.setLoginInfo({\n        role: values.role\n      });\n      if (this.state.formValues) this.props.setLoginInfo({\n        displayName: this.state.formValues.displayName || localStorage.getItem('loginInfo.displayName') || '',\n        roomName: this.state.formValues.roomName,\n        env: this.state.formValues.env\n      });\n      handleLogin();\n    });\n\n    _defineProperty(this, \"updatePermission\", async () => {\n      await getPermissionStatus().then(permission => {\n        if (permission) {\n          this.setState({\n            permissionGranted: true\n          });\n        } else {\n          this.setState({\n            permissionGranted: false\n          });\n        }\n      }).catch(error => {\n        console.log({\n          permissionError: error\n        });\n        this.setState({\n          permissionGranted: false\n        });\n      });\n    });\n\n    _defineProperty(this, \"soundMeterProcess\", () => {\n      var val = window.soundMeter.instant.toFixed(2) * 700 + 1;\n      this.setState({\n        audioLevel: val\n      }); //      if (this.state.visible)\n\n      setTimeout(this.soundMeterProcess, 100);\n    });\n\n    _defineProperty(this, \"startPreview\", (permissionTestMode = false) => {\n      closeMediaStream(window.stream);\n      let audioSource = this.props.settings.selectedAudioDevice;\n      let videoSource = this.props.settings.selectedVideoDevice;\n      let videoElement, soundMeterProcess;\n\n      if (!permissionTestMode) {\n        videoElement = document.getElementById('previewVideo'); // this.soundMeter = window.soundMeter = new SoundMeter(window.audioContext);\n        // soundMeterProcess = this.soundMeterProcess;\n      }\n\n      let constraints = {\n        audio: !this.props.roomState.localAudioEnabled ? true : {\n          deviceId: audioSource ? {\n            exact: audioSource\n          } : undefined\n        },\n        video: !this.props.roomState.localVideoEnabled ? true : {\n          deviceId: videoSource ? {\n            exact: videoSource\n          } : undefined\n        }\n      };\n      getUserMedia(constraints).then(stream => {\n        if (!permissionTestMode) {\n          window.stream = stream; // make stream available to console\n          //videoElement.srcObject = stream;\n\n          attachMediaStream(videoElement, stream); //TODO this throws an error when audio only is chosen. Handle it\n          // if (this.props.roomState.localAudioEnabled) {\n          //   soundMeter.connectToSource(stream);\n          //   setTimeout(soundMeterProcess, 100);\n          // }\n        }\n\n        return navigator.mediaDevices.enumerateDevices(); // Refresh button list in case labels have become available\n      }).then(devices => {\n        //TODO combine with updateInputDevices\n        let videoDevices = [];\n        let audioDevices = [];\n        let audioOutputDevices = [];\n\n        for (let device of devices) {\n          if (device.kind === 'videoinput') {\n            videoDevices.push(device);\n          } else if (device.kind === 'audioinput') {\n            audioDevices.push(device);\n          } else if (device.kind === 'audiooutput') {\n            audioOutputDevices.push(device);\n          }\n        }\n\n        let data = {\n          videoDevices,\n          audioDevices,\n          audioOutputDevices\n        };\n\n        if (this.props.settings.selectedAudioDevice === '' && data.audioDevices.length > 0) {\n          this.props.setSettings({\n            selectedAudioDevice: data.audioDevices[0].deviceId\n          });\n        }\n\n        if (this.props.settings.selectedVideoDevice === '' && data.videoDevices.length > 0) {\n          this.props.setSettings({\n            selectedVideoDevice: data.videoDevices[0].deviceId\n          });\n        }\n\n        this.setState({\n          audioDevices: data.audioDevices,\n          videoDevices: data.videoDevices,\n          permissionGranted: true,\n          formStage: 'PREVIEW'\n        });\n      }).catch(error => {\n        //TODO - look for only permission error. Rest of the errors should be handled\n        this.props.setLocalStreamError(error);\n        this.setState({\n          permissionGranted: false,\n          permissionText: \"You won't be able to access the meeting unless you grant camera and mic permissions\"\n        });\n      });\n    });\n\n    _defineProperty(this, \"updateDevice\", (name, value) => {\n      this.props.setSettings({\n        [name]: value\n      }, () => {\n        this.startPreview(false);\n      });\n    });\n\n    this.state = {\n      formStage: 'ROOM',\n      permissionGranted: false,\n      isSupported: deviceSupport().supported\n    };\n    let role = '';\n    let roomId = '';\n    let env = process.env.NEXT_PUBLIC_SFU_ENV || 'prod-in';\n    let displayName = localStorage.getItem('loginInfo.displayName') || props.loginInfo.displayName || '';\n\n    if (getRequest() && getRequest().hasOwnProperty('role')) {\n      role = getRequest().role;\n    }\n\n    if (getRequest() && getRequest().hasOwnProperty('room')) {\n      roomId = getRequest().room;\n    }\n\n    if (getRequest() && getRequest().hasOwnProperty('env')) {\n      env = getRequest().env;\n    }\n\n    this.props.setLoginInfo({\n      role,\n      roomId,\n      env,\n      displayName\n    });\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if ((prevState.formStage || this.state.formStage) && prevState.formStage !== this.state.formStage) {\n      if (this.state.formStage === 'PREVIEW') {\n        this.startPreview(false); //console.log(\"Start preview called from state change componentDidUpdate preview check\")\n      }\n    }\n  }\n\n  render() {\n    console.log(this.state.formStage);\n    const showEnv = !Boolean(process.env.NEXT_PUBLIC_SFU_ENV);\n    const showRoleSelect = Boolean(process.env.NEXT_PUBLIC_SFU_ENV);\n    return __jsx(React.Fragment, null, this.state.isSupported && __jsx(\"div\", {\n      className: \"relative z-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 11\n      }\n    }, this.state.formStage && this.state.formStage === 'ROOM' && __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\",\n      style: {\n        backgroundColor: '#1a1619',\n        minHeight: 'calc(100vh - 64px)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: \"overflow-hidden justify-right items-right shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 19\n      }\n    }, __jsx(\"h2\", {\n      className: \"mt-6 text-center text-3xl leading-9 font-extrabold text-gray-900 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 21\n      }\n    }, \"100ms Conference\"), __jsx(\"div\", {\n      className: \"mt-6 space-y-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 21\n      }\n    }, __jsx(\"button\", {\n      className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none transition duration-150 ease-in-out\",\n      onClick: () => {\n        this.setState({\n          formStage: 'CREATE_ROOM'\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 23\n      }\n    }, \"Create Room\"), __jsx(\"button\", {\n      className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-indigo-600 bg-white hover:text-indigo-700 hover:border-indigo-700 focus:outline-none border-indigo-600 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n      onClick: () => {\n        this.setState({\n          formStage: 'JOIN_ROOM'\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 23\n      }\n    }, \"Join Room\"))))), !this.props.loginInfo.roomId && this.state.formStage && this.state.formStage === 'CREATE_ROOM' && __jsx(React.Fragment, null, __jsx(Formik, {\n      initialValues: {\n        roomName: '',\n        displayName: this.props.loginInfo.displayName,\n        env: process.env.NEXT_PUBLIC_SFU_ENV || 'prod-in',\n        role: 'Host',\n        isRecording: false\n      },\n      validate: values => {\n        const errors = {};\n\n        if (!values.displayName) {\n          errors.displayName = 'Required';\n        }\n\n        if (!values.roomName) {\n          errors.roomName = 'Required';\n        }\n\n        const validRoomPattern = /^[a-zA-Z0-9-.:_]*$/g;\n\n        if (!validRoomPattern.test(values.roomName)) {\n          errors.roomName = 'Accepted characters are a-z, A-Z, 0-9, . - : _';\n        }\n\n        if (showEnv && !values.env) {\n          errors.env = 'Required';\n        }\n\n        return errors;\n      },\n      onSubmit: values => {\n        this.setState({\n          formValues: values\n        });\n        this.handleCreateSubmit(values);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 19\n      }\n    }, ({\n      errors,\n      touched,\n      initialValues\n    }) => __jsx(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 23\n      }\n    }, __jsx(\"div\", {\n      className: \" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\",\n      style: {\n        backgroundColor: '#1a1619',\n        minHeight: 'calc(100vh - 64px)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 516,\n        columnNumber: 25\n      }\n    }, __jsx(\"div\", {\n      className: \"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 p-6 bg-gray-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 523,\n        columnNumber: 27\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 29\n      }\n    }, __jsx(\"h2\", {\n      className: \"text-center justify-center items-center text-3xl leading-9 font-extrabold text-gray-900 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 31\n      }\n    }, initialValues && __jsx(React.Fragment, null, __jsx(ArrowLeftIcon, {\n      className: \"text-gray-700 hover:text-black\",\n      onClick: () => {\n        this.setState({\n          formStage: 'ROOM'\n        });\n        this.props.setLoginInfo({\n          roomId: ''\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 37\n      }\n    }), \"100ms Conference\"))), __jsx(\"div\", {\n      className: \"rounded-m\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 542,\n        columnNumber: 29\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 543,\n        columnNumber: 31\n      }\n    }, __jsx(LoginTextField, {\n      label: \"Room Name\",\n      name: \"roomName\",\n      className: \"rounded-t-md\",\n      placeholder: \"Room Name\",\n      errors: errors.roomName,\n      touched: touched.roomName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 33\n      }\n    })), __jsx(\"div\", {\n      className: \"-mt-px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 31\n      }\n    }, initialValues && __jsx(LoginTextField, {\n      label: \"Username\",\n      name: \"displayName\",\n      className: !(initialValues && !initialValues.roomId) && 'rounded-t-md',\n      placeholder: \"Username\",\n      errors: errors.displayName,\n      touched: touched.displayName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 35\n      }\n    })), __jsx(\"div\", {\n      className: \"-mt-px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 569,\n        columnNumber: 31\n      }\n    }, initialValues ? showRoleSelect ? __jsx(LoginTextField, {\n      label: \"Role\",\n      name: \"role\",\n      as: showRoleSelect ? 'select' : null,\n      className: !showEnv && 'rounded-b-md',\n      placeholder: \"Role\",\n      disabled: this.props.loginInfo.role === ROLES.VIEWER,\n      errors: errors.role,\n      touched: touched.rol,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 37\n      }\n    }, __jsx(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 585,\n        columnNumber: 39\n      }\n    }, \"Select Role\"), Object.values(ROLES).map((role, index) => __jsx(\"option\", {\n      key: index,\n      value: role,\n      className: \"capitalize\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 588,\n        columnNumber: 43\n      }\n    }, role))) : __jsx(LoginTextField, {\n      label: \"Role\",\n      name: \"role\",\n      className: !showEnv && 'rounded-b-md',\n      placeholder: \"Role\",\n      disabled: this.props.loginInfo.role === ROLES.VIEWER,\n      errors: errors.role,\n      touched: touched.rol,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 37\n      }\n    }) : null), showEnv && __jsx(\"div\", {\n      className: \"-mt-px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 616,\n        columnNumber: 33\n      }\n    }, initialValues && __jsx(LoginTextField, {\n      label: \"Environment\",\n      name: \"env\",\n      className: \"rounded-b-md\",\n      placeholder: \"Environment (qa-in/staging-in/prod-in)\",\n      errors: errors.env,\n      touched: touched.env,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 37\n      }\n    }))), __jsx(\"div\", {\n      className: \"mt-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 630,\n        columnNumber: 29\n      }\n    }, __jsx(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 631,\n        columnNumber: 31\n      }\n    }, __jsx(Field, {\n      type: \"checkbox\",\n      name: \"isRecording\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 632,\n        columnNumber: 33\n      }\n    }), '  ', \" Record Room?\")), __jsx(\"div\", {\n      className: \"mt-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 29\n      }\n    }, __jsx(\"button\", {\n      type: \"submit\",\n      className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 638,\n        columnNumber: 31\n      }\n    }, __jsx(\"span\", {\n      className: \"absolute left-0 inset-y-0 flex items-center pl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 642,\n        columnNumber: 33\n      }\n    }), \"Create Room\"))))))), this.state.formStage && this.state.formStage === 'JOIN_ROOM' && __jsx(React.Fragment, null, __jsx(Formik, {\n      initialValues: {\n        roomId: this.props.loginInfo.roomId ? this.props.loginInfo.roomId : '',\n        displayName: this.props.loginInfo.displayName,\n        env: this.props.loginInfo.env ? this.props.loginInfo.env : '',\n        role: this.props.loginInfo.role ? this.props.loginInfo.role : 'Guest'\n      },\n      validate: values => {\n        const errors = {};\n\n        if (!values.displayName) {\n          errors.displayName = 'Required';\n        }\n\n        if (!values.roomId) {\n          errors.roomId = 'Required';\n        }\n\n        if (showEnv && !values.env) {\n          errors.env = 'Required';\n        }\n\n        return errors;\n      },\n      onSubmit: values => {\n        this.setState({\n          formValues: values\n        });\n        this.handleJoinSubmit(values);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 655,\n        columnNumber: 17\n      }\n    }, ({\n      errors,\n      touched,\n      initialValues\n    }) => __jsx(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 687,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: \" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\",\n      style: {\n        backgroundColor: '#1a1619',\n        minHeight: 'calc(100vh - 64px)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 688,\n        columnNumber: 23\n      }\n    }, __jsx(\"div\", {\n      className: \"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 p-6 bg-gray-100\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 25\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 696,\n        columnNumber: 27\n      }\n    }, __jsx(\"h2\", {\n      className: \"text-center text-3xl leading-9 font-extrabold text-gray-900 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 699,\n        columnNumber: 29\n      }\n    }, initialValues && __jsx(React.Fragment, null, __jsx(ArrowLeftIcon, {\n      className: \"text-gray-700 hover:text-black\",\n      onClick: () => {\n        this.setState({\n          formStage: 'ROOM'\n        });\n        this.props.setLoginInfo({\n          roomId: ''\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 702,\n        columnNumber: 35\n      }\n    }), \"100ms Conference\")), initialValues && initialValues.roomId && __jsx(\"p\", {\n      className: \"my-2 text-center text-sm leading-5 text-gray-600\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 716,\n        columnNumber: 31\n      }\n    }, \"You are about to join room:\", ' ', __jsx(\"span\", {\n      className: \"font-bold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 718,\n        columnNumber: 33\n      }\n    }, initialValues.roomId))), __jsx(\"div\", {\n      className: \"rounded-md\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 724,\n        columnNumber: 27\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 725,\n        columnNumber: 29\n      }\n    }, initialValues && !initialValues.roomId && __jsx(LoginTextField, {\n      label: \"Room ID\",\n      name: \"roomId\",\n      className: \"rounded-t-md\",\n      placeholder: \"Room ID\",\n      errors: errors.roomId,\n      touched: touched.roomId,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 727,\n        columnNumber: 33\n      }\n    })), __jsx(\"div\", {\n      className: \"-mt-px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 737,\n        columnNumber: 29\n      }\n    }, initialValues && __jsx(LoginTextField, {\n      label: \"Username\",\n      name: \"displayName\",\n      className: !(initialValues && !initialValues.roomId) && 'rounded-t-md',\n      placeholder: \"Username\",\n      errors: errors.displayName,\n      touched: touched.displayName,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 739,\n        columnNumber: 33\n      }\n    })), __jsx(\"div\", {\n      className: \"-mt-px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 752,\n        columnNumber: 29\n      }\n    }, initialValues ? showRoleSelect ? __jsx(LoginTextField, {\n      label: \"Role\",\n      name: \"role\",\n      as: showRoleSelect ? 'select' : null,\n      className: !showEnv && 'rounded-b-md',\n      placeholder: \"Role\",\n      disabled: this.props.loginInfo.role === ROLES.VIEWER,\n      errors: errors.role,\n      touched: touched.rol,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 35\n      }\n    }, __jsx(\"option\", {\n      value: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 767,\n        columnNumber: 37\n      }\n    }, \"Select Role\"), Object.values(ROLES).map((role, index) => __jsx(\"option\", {\n      key: index,\n      value: role,\n      className: \"capitalize\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 769,\n        columnNumber: 39\n      }\n    }, role))) : __jsx(LoginTextField, {\n      label: \"Role\",\n      name: \"role\",\n      className: !showEnv && 'rounded-b-md',\n      placeholder: \"Role\",\n      disabled: this.props.loginInfo.role === ROLES.VIEWER,\n      errors: errors.role,\n      touched: touched.rol,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 779,\n        columnNumber: 35\n      }\n    }) : null), showEnv && __jsx(\"div\", {\n      className: \"-mt-px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 794,\n        columnNumber: 31\n      }\n    }, initialValues && __jsx(LoginTextField, {\n      label: \"Environment\",\n      name: \"env\",\n      className: \"rounded-b-md\",\n      placeholder: \"Environment (qa-in/staging-in/prod-in)\",\n      errors: errors.env,\n      touched: touched.env,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 796,\n        columnNumber: 35\n      }\n    }))), __jsx(\"div\", {\n      className: \"mt-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 809,\n        columnNumber: 27\n      }\n    }, __jsx(\"button\", {\n      type: \"submit\",\n      className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 810,\n        columnNumber: 29\n      }\n    }, __jsx(\"span\", {\n      className: \"absolute left-0 inset-y-0 flex items-center pl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 814,\n        columnNumber: 31\n      }\n    }), \"Join Room\"))))))), this.state.formStage && this.state.formStage === 'PERMISSION' && __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\",\n      style: {\n        backgroundColor: '#1a1619',\n        minHeight: 'calc(100vh - 64px)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 827,\n        columnNumber: 17\n      }\n    }, __jsx(\"div\", {\n      className: \"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100 my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 834,\n        columnNumber: 19\n      }\n    }, __jsx(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 835,\n        columnNumber: 21\n      }\n    }, __jsx(\"h2\", {\n      className: \"mt-2 text-center text-3xl leading-9 font-extrabold text-gray-900\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 836,\n        columnNumber: 23\n      }\n    }, \"100ms Conference\"), __jsx(\"p\", {\n      className: \"mt-2 text-center text-sm leading-5 text-gray-600 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 840,\n        columnNumber: 23\n      }\n    }, this.state.permissionText), __jsx(\"div\", {\n      className: \"mt-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 843,\n        columnNumber: 23\n      }\n    }, __jsx(\"button\", {\n      className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n      onClick: () => {\n        this.startPreview(true);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 844,\n        columnNumber: 25\n      }\n    }, __jsx(\"span\", {\n      className: \"absolute left-0 inset-y-0 flex items-center pl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 850,\n        columnNumber: 27\n      }\n    }), \"Prompt permission dialog\")))))), this.state.formStage && this.state.formStage === 'PREVIEW' && __jsx(React.Fragment, null, __jsx(Formik, {\n      initialValues: {\n        selectedAudioDevice: this.props.settings ? this.props.settings.selectedAudioDevice : null,\n        selectedVideoDevice: this.props.settings ? this.props.settings.selectedVideoDevice : null // selectedAudioOutputDevice: this.state.settings\n        //   ? this.state.settings.selectedAudioOutputDevice\n        //   : null,\n\n      },\n      validate: values => {\n        const errors = {}; // if (!values.displayName) {\n        //   errors.displayName = 'Required';\n        // }\n        // if (!values.roomName){\n        //   errors.roomName = 'Required';\n        // }\n\n        return errors;\n      },\n      onSubmit: values => {\n        if (window.stream) {\n          closeMediaStream(window.stream);\n        }\n\n        this.handleSubmit(values);\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 861,\n        columnNumber: 17\n      }\n    }, ({\n      values,\n      initialValues\n    }) => __jsx(Form, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 891,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: \" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\",\n      style: {\n        backgroundColor: '#1a1619',\n        minHeight: 'calc(100vh - 64px)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 892,\n        columnNumber: 23\n      }\n    }, __jsx(\"div\", {\n      className: \"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100 my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 899,\n        columnNumber: 25\n      }\n    }, __jsx(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 900,\n        columnNumber: 27\n      }\n    }, __jsx(\"h2\", {\n      className: \"mt-2 text-center text-3xl leading-9 font-extrabold text-gray-900\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 901,\n        columnNumber: 29\n      }\n    }, __jsx(React.Fragment, null, \"100ms Conference\")), __jsx(\"p\", {\n      className: \"mt-2 text-center text-sm leading-5 text-gray-600 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 904,\n        columnNumber: 29\n      }\n    }, \"You are about to join\", ' ', __jsx(\"span\", {\n      className: \"font-semibold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 906,\n        columnNumber: 31\n      }\n    }, this.state.formValues ? this.state.formValues.roomName : this.props.loginInfo.roomName), ' ', \"as\", ' ', __jsx(\"span\", {\n      className: \"font-semibold\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 912,\n        columnNumber: 31\n      }\n    }, this.state.formValues ? this.state.formValues.displayName : this.props.loginInfo.displayName), __jsx(\"button\", {\n      className: \"rounded-md px-2 py-1 hover:bg-indigo-500 ml-1 border transition duration-150 ease-in-out\",\n      onClick: () => {\n        this.setState({\n          formStage: 'JOIN_ROOM'\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 917,\n        columnNumber: 31\n      }\n    }, \"Change\"))), __jsx(\"div\", {\n      className: \"mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 927,\n        columnNumber: 27\n      }\n    }, __jsx(\"div\", {\n      className: \"relative h-48 bg-black rounded-md mb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 928,\n        columnNumber: 29\n      }\n    }, __jsx(\"video\", {\n      id: \"previewVideo\",\n      autoPlay: true,\n      playsInline: true,\n      muted: true,\n      className: `rounded-md h-full w-full ${!this.props.roomState.localVideoEnabled && 'hidden'}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 929,\n        columnNumber: 31\n      }\n    }), __jsx(\"div\", {\n      className: \"absolute bottom-0 w-full flex justify-center pb-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 940,\n        columnNumber: 31\n      }\n    }, __jsx(\"button\", {\n      onClick: e => {\n        e.preventDefault();\n        const initialValue = this.props.roomState.localVideoEnabled;\n        this.props.setRoomState({\n          localVideoEnabled: !initialValue\n        });\n      },\n      className: `py-1 px-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 active:bg-indigo-700 transition duration-150 ease-in-out ${this.props.roomState.localVideoEnabled ? 'bg-opacity-50 bg-gray-600' : 'bg-indigo-600'}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 941,\n        columnNumber: 33\n      }\n    }, this.props.roomState.localVideoEnabled && __jsx(\"svg\", {\n      className: \"w-6 h-6\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      viewBox: \"0 0 24 24\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 957,\n        columnNumber: 37\n      }\n    }, __jsx(\"path\", {\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeWidth: 2,\n      d: \"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 964,\n        columnNumber: 39\n      }\n    })), !this.props.roomState.localVideoEnabled && __jsx(\"svg\", {\n      className: \"w-6 h-6\",\n      viewBox: \"0 0 24 24\",\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 973,\n        columnNumber: 37\n      }\n    }, __jsx(\"path\", {\n      d: \"M15 10L19.553 7.724C19.7054 7.64784 19.8748 7.61188 20.045 7.61955C20.2152 7.62721 20.3806 7.67825 20.5256 7.76781C20.6706 7.85736 20.7902 7.98248 20.8733 8.13127C20.9563 8.28007 20.9999 8.44761 21 8.618V15.382C20.9999 15.5524 20.9563 15.7199 20.8733 15.8687C20.7902 16.0175 20.6706 16.1426 20.5256 16.2322C20.3806 16.3218 20.2152 16.3728 20.045 16.3805C19.8748 16.3881 19.7054 16.3522 19.553 16.276L15 14V10ZM5 18H13C13.5304 18 14.0391 17.7893 14.4142 17.4142C14.7893 17.0391 15 16.5304 15 16V8C15 7.46957 14.7893 6.96086 14.4142 6.58579C14.0391 6.21071 13.5304 6 13 6H5C4.46957 6 3.96086 6.21071 3.58579 6.58579C3.21071 6.96086 3 7.46957 3 8V16C3 16.5304 3.21071 17.0391 3.58579 17.4142C3.96086 17.7893 4.46957 18 5 18Z\",\n      stroke: \"currentColor\",\n      strokeWidth: \"2\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 979,\n        columnNumber: 39\n      }\n    }), __jsx(\"line\", {\n      x1: \"2.00177\",\n      y1: \"19.7113\",\n      x2: \"16.1289\",\n      y2: \"4.10676\",\n      stroke: \"currentColor\",\n      strokeWidth: \"2\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 986,\n        columnNumber: 39\n      }\n    }))), __jsx(\"button\", {\n      onClick: e => {\n        e.preventDefault();\n        const initialValue = this.props.roomState.localAudioEnabled;\n        this.props.setRoomState({\n          localAudioEnabled: !initialValue\n        });\n      },\n      className: `ml-1 py-1 px-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out ${this.props.roomState.localAudioEnabled ? 'bg-opacity-50 bg-gray-600' : 'bg-indigo-600'}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1000,\n        columnNumber: 33\n      }\n    }, this.props.roomState.localAudioEnabled && __jsx(\"svg\", {\n      className: \"w-6 h-6\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      viewBox: \"0 0 24 24\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1016,\n        columnNumber: 37\n      }\n    }, __jsx(\"path\", {\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      strokeWidth: \"2\",\n      d: \"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1023,\n        columnNumber: 39\n      }\n    })), !this.props.roomState.localAudioEnabled && __jsx(\"svg\", {\n      className: \"h-6 w-6\",\n      viewBox: \"0 0 24 24\",\n      fill: \"none\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1032,\n        columnNumber: 37\n      }\n    }, __jsx(\"path\", {\n      d: \"M19 11C19 12.8565 18.2625 14.637 16.9497 15.9497C15.637 17.2625 13.8565 18 12 18M12 18C10.1435 18 8.36301 17.2625 7.05025 15.9497C5.7375 14.637 5 12.8565 5 11M12 18V22M12 22H8M12 22H16M12 14C11.2044 14 10.4413 13.6839 9.87868 13.1213C9.31607 12.5587 9 11.7956 9 11V5C9 4.20435 9.31607 3.44129 9.87868 2.87868C10.4413 2.31607 11.2044 2 12 2C12.7956 2 13.5587 2.31607 14.1213 2.87868C14.6839 3.44129 15 4.20435 15 5V11C15 11.7956 14.6839 12.5587 14.1213 13.1213C13.5587 13.6839 12.7956 14 12 14Z\",\n      stroke: \"currentColor\",\n      strokeWidth: \"2\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1038,\n        columnNumber: 39\n      }\n    }), __jsx(\"line\", {\n      x1: \"4.43121\",\n      y1: \"18.0549\",\n      x2: \"18.5583\",\n      y2: \"2.45033\",\n      stroke: \"currentColor\",\n      strokeWidth: \"2\",\n      strokeLinecap: \"round\",\n      strokeLinejoin: \"round\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1045,\n        columnNumber: 39\n      }\n    }))))), this.props.roomState.localAudioEnabled && __jsx(\"div\", {\n      className: \"px-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1061,\n        columnNumber: 31\n      }\n    }, __jsx(\"div\", {\n      style: {\n        width: !this.props.roomState.localAudioEnabled ? '1px' : this.state.audioLevel + 'px',\n        height: '4px',\n        backgroundColor: '#8dc63f'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1062,\n        columnNumber: 33\n      }\n    }))), __jsx(\"div\", {\n      className: \"rounded-md shadow-sm\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1075,\n        columnNumber: 27\n      }\n    }, __jsx(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1076,\n        columnNumber: 29\n      }\n    }, initialValues && __jsx(Field, {\n      label: \"Audio Input\",\n      name: \"selectedAudioDevice\",\n      className: \"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\",\n      placeholder: \"Audio Input\",\n      component: SingleSelect,\n      options: this.state.audioDevices,\n      updateDevice: this.updateDevice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1078,\n        columnNumber: 33\n      }\n    })), __jsx(\"div\", {\n      className: \"-mt-px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1089,\n        columnNumber: 29\n      }\n    }, initialValues && __jsx(Field, {\n      label: \"Video Input\",\n      name: \"selectedVideoDevice\",\n      className: `appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5`,\n      placeholder: \"Video Input\",\n      component: SingleSelect,\n      options: this.state.videoDevices,\n      updateDevice: this.updateDevice,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1091,\n        columnNumber: 33\n      }\n    }))), __jsx(\"div\", {\n      className: \"mt-0\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1117,\n        columnNumber: 27\n      }\n    }, __jsx(\"button\", {\n      type: \"submit\",\n      className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1118,\n        columnNumber: 29\n      }\n    }, __jsx(\"span\", {\n      className: \"absolute left-0 inset-y-0 flex items-center pl-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1122,\n        columnNumber: 31\n      }\n    }), \"Join\")))))))), !this.state.isSupported && __jsx(React.Fragment, null, __jsx(\"div\", {\n      className: \" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\",\n      style: {\n        backgroundColor: '#1a1619',\n        minHeight: 'calc(100vh - 64px)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1137,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100 my-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1144,\n        columnNumber: 15\n      }\n    }, __jsx(\"div\", {\n      className: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1145,\n        columnNumber: 17\n      }\n    }, __jsx(\"h2\", {\n      className: \"mt-2 text-center text-3xl leading-9 font-extrabold text-gray-900\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1146,\n        columnNumber: 19\n      }\n    }, \"100ms Conference\"), __jsx(\"p\", {\n      className: \"mt-2 text-center text-sm leading-5 text-gray-600 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1150,\n        columnNumber: 19\n      }\n    }, deviceSupport().failureCause == 'iOS' ? __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1152,\n        columnNumber: 23\n      }\n    }, \"100ms users might face issues on iOS devices. Please open the link on another device for the best experience. If you wish to continue on iOS, click continue.\") : __jsx(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1158,\n        columnNumber: 23\n      }\n    }, \"We recommend using Google Chrome for the best experience.\")), __jsx(\"div\", {\n      className: \"mt-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1164,\n        columnNumber: 19\n      }\n    }, deviceSupport().failureCause == 'browser' && __jsx(\"a\", {\n      className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 hover:text-white focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n      href: \"https://www.google.com/chrome/\",\n      target: \"_blank\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1166,\n        columnNumber: 23\n      }\n    }, \"Download Google Chrome\"), __jsx(\"button\", {\n      className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-indigo-600 bg-white hover:text-indigo-700 hover:border-indigo-700 focus:outline-none border-indigo-600 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out mt-3\",\n      onClick: () => this.setState({\n        isSupported: true\n      }),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1174,\n        columnNumber: 21\n      }\n    }, \"Continue in current browser\")))))));\n  }\n\n}\n\nfunction objToStrMap(obj) {\n  const strMap = new Map();\n\n  for (const k of Object.keys(obj)) {\n    strMap.set(k, obj[k]);\n  }\n\n  return strMap;\n}\n\nconst WrappedLoginForm = LoginForm; //const WrappedLoginForm = Form.create({ name: \"login\" })(LoginForm);\n\nexport default WrappedLoginForm;","map":{"version":3,"sources":["/Users/Pravin/Study/nikhil/react/sample-app-web/src/components/LoginForm.jsx"],"names":["React","notification","Formik","Form","Field","LocalStream","updateInputDevices","SingleSelect","closeMediaStream","attachMediaStream","getRequest","deviceSupport","getUserMedia","getPermissionStatus","SoundMeter","ArrowLeftIcon","ROLES","LoginTextField","LoginForm","Component","constructor","props","console","log","loginInfo","role","setState","isSupported","supported","updatePermission","permissionGranted","state","window","location","protocol","host","pathname","query","LIVE_RECORD","roomId","handleLogin","setLoginInfo","displayName","permissionText","hasOwnProperty","env","startPreview","formStage","_cleanup","message","description","type","info","placement","error","stream","tracks","getTracks","i","len","length","stop","_stopMediaStream","client","unpublish","rid","leave","callback","then","data","settings","selectedAudioDevice","audioDevices","setSettings","deviceId","selectedVideoDevice","videoDevices","audioOutputDevices","values","endpoint","process","NEXT_PUBLIC_CREATE_ROOM_ENDPOINT","response","fetch","method","body","JSON","stringify","room_name","roomName","recording_info","enabled","isRecording","catch","err","status","json","_notification","roomEntry","id","handleNameSubmit","VIEWER","formValues","localStorage","getItem","permission","permissionError","val","soundMeter","instant","toFixed","audioLevel","setTimeout","soundMeterProcess","permissionTestMode","audioSource","videoSource","videoElement","document","getElementById","constraints","audio","roomState","localAudioEnabled","exact","undefined","video","localVideoEnabled","navigator","mediaDevices","enumerateDevices","devices","device","kind","push","setLocalStreamError","name","value","NEXT_PUBLIC_SFU_ENV","room","componentDidUpdate","prevProps","prevState","render","showEnv","Boolean","showRoleSelect","backgroundColor","minHeight","errors","validRoomPattern","test","handleCreateSubmit","touched","initialValues","rol","Object","map","index","handleJoinSubmit","handleSubmit","e","preventDefault","initialValue","setRoomState","width","height","updateDevice","failureCause","objToStrMap","obj","strMap","Map","k","keys","set","WrappedLoginForm"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { notification } from 'antd';\nimport { Formik, Form, Field } from 'formik';\nimport { LocalStream } from '@100mslive/hmsvideo-web';\nimport {\n  updateInputDevices,\n  SingleSelect,\n  closeMediaStream,\n  attachMediaStream,\n  getRequest,\n  deviceSupport,\n  getUserMedia,\n  getPermissionStatus,\n} from '../utils';\nimport SoundMeter from './Settings/soundmeter';\n\nimport ArrowLeftIcon from 'mdi-react/ArrowLeftIcon';\n\nimport { ROLES } from '../constants';\nimport LoginTextField from './LoginTextField';\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      formStage: 'ROOM',\n      permissionGranted: false,\n      isSupported: deviceSupport().supported,\n    };\n\n    let role = '';\n    let roomId = '';\n    let env = process.env.NEXT_PUBLIC_SFU_ENV || 'prod-in';\n    let displayName =\n      localStorage.getItem('loginInfo.displayName') ||\n      props.loginInfo.displayName ||\n      '';\n\n    if (getRequest() && getRequest().hasOwnProperty('role')) {\n      role = getRequest().role;\n    }\n    if (getRequest() && getRequest().hasOwnProperty('room')) {\n      roomId = getRequest().room;\n    }\n    if (getRequest() && getRequest().hasOwnProperty('env')) {\n      env = getRequest().env;\n    }\n\n    this.props.setLoginInfo({\n      role,\n      roomId,\n      env,\n      displayName,\n    });\n  }\n\n  componentDidMount = async () => {\n    console.log(`%c[APP] Role=${this.props.loginInfo.role}`);\n\n    this.setState({\n      isSupported: deviceSupport().supported,\n    });\n\n    await this.updatePermission();\n\n    console.log({ permissionGranted: this.state.permissionGranted });\n    //const { form } = this.props;\n    console.log('window.location:' + window.location);\n    console.log(\n      'url:' +\n        window.location.protocol +\n        window.location.host +\n        '  ' +\n        window.location.pathname +\n        window.location.query\n    );\n\n    // if (!this.props.settings.codec) {\n    //   this.props.setSettings({\n    //     selectedAudioDevice: '',\n    //     selectedVideoDevice: '',\n    //     // selectedAudioOutputDevice: \"\",\n    //     resolution: 'qvga',\n    //     bandwidth: 256,\n    //     codec: 'vp8',\n    //     isDevMode: true,\n    //   });\n    // }\n\n    if (\n      this.props.loginInfo.role === ROLES.LIVE_RECORD &&\n      this.props.loginInfo.roomId !== ''\n    ) {\n      console.log(\n        `%c[APP] Skipping audio & video permission promt for the live-record bot`,\n        'color: blue'\n      );\n      const handleLogin = this.props.handleLogin;\n      this.props.setLoginInfo({\n        displayName: null,\n        role: ROLES.LIVE_RECORD,\n      });\n      handleLogin();\n      return;\n    }\n\n    // ToDo: Show a confirmation dialog for ROLES.VIEWER\n\n    this.setState({\n      permissionText:\n        'We will need your permission to use your webcam and microphone.',\n    });\n\n    if (\n      getRequest() &&\n      getRequest().hasOwnProperty('room') &&\n      this.props.loginInfo.displayName !== '' &&\n      this.props.loginInfo.roomId !== '' &&\n      this.props.loginInfo.env !== ''\n    ) {\n      if (this.state.permissionGranted) {\n        console.log('Showing preview');\n        this.startPreview(true);\n      } else {\n        this.setState({ formStage: 'PERMISSION' });\n      }\n    } else {\n      let formStage = 'ROOM';\n      console.log(`[FormStage: ${formStage}]`);\n      if (this.props.loginInfo.roomId != '') {\n        formStage = 'JOIN_ROOM';\n      }\n      this.setState({ formStage: formStage });\n    }\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      (prevState.formStage || this.state.formStage) &&\n      prevState.formStage !== this.state.formStage\n    ) {\n      if (this.state.formStage === 'PREVIEW') {\n        this.startPreview(false);\n        //console.log(\"Start preview called from state change componentDidUpdate preview check\")\n      }\n    }\n  }\n\n  componentWillUnmount = () => {\n    this._cleanup();\n  };\n\n  _notification = (message, description, type = 'info') => {\n    if (type == 'info') {\n      notification.info({\n        message: message,\n        description: description,\n        placement: 'bottomRight',\n      });\n    } else if (type == 'error') {\n      notification.error({\n        message: message,\n        description: description,\n        placement: 'bottomRight',\n      });\n    }\n  };\n\n  _stopMediaStream = async stream => {\n    let tracks = stream.getTracks();\n    for (let i = 0, len = tracks.length; i < len; i++) {\n      await tracks[i].stop();\n    }\n  };\n\n  _cleanup = async () => {\n    if (this.stream) {\n      await this._stopMediaStream(this.stream);\n      await this.client.unpublish(this.stream, this.client.rid);\n    }\n    if (this.client) await this.client.leave();\n  };\n\n  updateDeviceList = callback => {\n    updateInputDevices().then(data => {\n      if (\n        this.props.settings.selectedAudioDevice === '' &&\n        data.audioDevices.length > 0\n      ) {\n        this.props.setSettings({\n          selectedAudioDevice: data.audioDevices[0].deviceId,\n        });\n      }\n      if (\n        this.props.settings.selectedVideoDevice === '' &&\n        data.videoDevices.length > 0\n      ) {\n        this.props.setSettings({\n          selectedVideoDevice: data.videoDevices[0].deviceId,\n        });\n      }\n\n      // if (\n      //   this.state.settings.selectedAudioOutputDevice === \"\" &&\n      //   data.audioOutputDevices.length > 0\n      // ) {\n      //   console.log(\"setting output device\")\n      //   this.state.settings.selectedAudioOutputDevice =\n      //     data.audioOutputDevices[0].deviceId\n      // }\n\n      this.setState({\n        videoDevices: data.videoDevices,\n        audioDevices: data.audioDevices,\n        audioOutputDevices: data.audioOutputDevices,\n      });\n      if (callback) {\n        callback();\n      }\n    });\n  };\n\n  handleCreateSubmit = async values => {\n    const endpoint =\n      process.env.NEXT_PUBLIC_CREATE_ROOM_ENDPOINT || '/api/room';\n    console.log('endpoint', endpoint);\n    console.log('Create Room values: ', values);\n    const response = await fetch(endpoint, {\n      method: 'POST',\n      body: JSON.stringify({\n        room_name: values.roomName,\n        recording_info: {\n          enabled: values.isRecording,\n        },\n        env: values.env,\n      }),\n    }).catch(err => {\n      console.log('Error', err);\n    });\n\n    console.log('Response: ', response);\n    if (response.status != 200) {\n      const data = await response.json();\n      this._notification('Error', data.message, 'error');\n    } else {\n      const roomEntry = await response.json();\n      console.log('response:', roomEntry);\n      values.roomId = roomEntry.id;\n      this._notification(\n        'Room Created',\n        `Room Id: ${values.roomId} Room Name: ${values.roomName}`\n      );\n      this.handleNameSubmit(values);\n    }\n  };\n\n  handleJoinSubmit = values => {\n    // TODO: How to get roomName from roomId\n    this.handleNameSubmit(values);\n  };\n\n  handleNameSubmit = values => {\n    console.log(this.state.permissionGranted);\n    this.props.setLoginInfo({\n      roomId: values.roomId,\n    });\n    if (values.roomName) {\n      this.props.setLoginInfo({\n        roomName: values.roomName,\n      });\n    }\n    if (values.role) {\n      this.props.setLoginInfo({\n        role: values.role,\n      });\n    }\n    if (values.env) {\n      this.props.setLoginInfo({\n        env: values.env,\n      });\n    }\n    if (values.displayName) {\n      this.props.setLoginInfo({\n        displayName: values.displayName,\n      });\n    }\n\n    if (this.props.loginInfo.role === ROLES.VIEWER) {\n      this.props.handleLogin();\n    } else if (this.state.permissionGranted) {\n      console.log('Showing preview');\n      this.startPreview(true);\n    } else {\n      this.setState({ formValues: values, formStage: 'PERMISSION' });\n    }\n  };\n\n  handleSubmit = values => {\n    const handleLogin = this.props.handleLogin;\n    console.log('Values in handleSubmit: ', values);\n    console.log(\n      'this.props.loginInfo.roomId in handleSubmit: ',\n      this.props.loginInfo.roomId\n    );\n    if (values.role) this.props.setLoginInfo({ role: values.role });\n    if (this.state.formValues)\n      this.props.setLoginInfo({\n        displayName:\n          this.state.formValues.displayName ||\n          localStorage.getItem('loginInfo.displayName') ||\n          '',\n        roomName: this.state.formValues.roomName,\n        env: this.state.formValues.env,\n      });\n    handleLogin();\n  };\n\n  updatePermission = async () => {\n    await getPermissionStatus()\n      .then(permission => {\n        if (permission) {\n          this.setState({ permissionGranted: true });\n        } else {\n          this.setState({ permissionGranted: false });\n        }\n      })\n      .catch(error => {\n        console.log({ permissionError: error });\n        this.setState({ permissionGranted: false });\n      });\n  };\n\n  soundMeterProcess = () => {\n    var val = window.soundMeter.instant.toFixed(2) * 700 + 1;\n    this.setState({ audioLevel: val });\n    //      if (this.state.visible)\n    setTimeout(this.soundMeterProcess, 100);\n  };\n\n  startPreview = (permissionTestMode = false) => {\n    closeMediaStream(window.stream);\n    let audioSource = this.props.settings.selectedAudioDevice;\n    let videoSource = this.props.settings.selectedVideoDevice;\n    let videoElement, soundMeterProcess;\n    if (!permissionTestMode) {\n      videoElement = document.getElementById('previewVideo');\n      // this.soundMeter = window.soundMeter = new SoundMeter(window.audioContext);\n      // soundMeterProcess = this.soundMeterProcess;\n    }\n    let constraints = {\n      audio: !this.props.roomState.localAudioEnabled\n        ? true\n        : { deviceId: audioSource ? { exact: audioSource } : undefined },\n      video: !this.props.roomState.localVideoEnabled\n        ? true\n        : { deviceId: videoSource ? { exact: videoSource } : undefined },\n    };\n    getUserMedia(constraints)\n      .then(stream => {\n        if (!permissionTestMode) {\n          window.stream = stream; // make stream available to console\n          //videoElement.srcObject = stream;\n          attachMediaStream(videoElement, stream);\n          //TODO this throws an error when audio only is chosen. Handle it\n          // if (this.props.roomState.localAudioEnabled) {\n          //   soundMeter.connectToSource(stream);\n          //   setTimeout(soundMeterProcess, 100);\n          // }\n        }\n        return navigator.mediaDevices.enumerateDevices();\n        // Refresh button list in case labels have become available\n      })\n      .then(devices => {\n        //TODO combine with updateInputDevices\n        let videoDevices = [];\n        let audioDevices = [];\n        let audioOutputDevices = [];\n        for (let device of devices) {\n          if (device.kind === 'videoinput') {\n            videoDevices.push(device);\n          } else if (device.kind === 'audioinput') {\n            audioDevices.push(device);\n          } else if (device.kind === 'audiooutput') {\n            audioOutputDevices.push(device);\n          }\n        }\n        let data = { videoDevices, audioDevices, audioOutputDevices };\n        if (\n          this.props.settings.selectedAudioDevice === '' &&\n          data.audioDevices.length > 0\n        ) {\n          this.props.setSettings({\n            selectedAudioDevice: data.audioDevices[0].deviceId,\n          });\n        }\n        if (\n          this.props.settings.selectedVideoDevice === '' &&\n          data.videoDevices.length > 0\n        ) {\n          this.props.setSettings({\n            selectedVideoDevice: data.videoDevices[0].deviceId,\n          });\n        }\n        this.setState({\n          audioDevices: data.audioDevices,\n          videoDevices: data.videoDevices,\n          permissionGranted: true,\n          formStage: 'PREVIEW',\n        });\n      })\n      .catch(error => {\n        //TODO - look for only permission error. Rest of the errors should be handled\n        this.props.setLocalStreamError(error);\n        this.setState({\n          permissionGranted: false,\n          permissionText:\n            \"You won't be able to access the meeting unless you grant camera and mic permissions\",\n        });\n      });\n  };\n\n  updateDevice = (name, value) => {\n    this.props.setSettings(\n      {\n        [name]: value,\n      },\n      () => {\n        this.startPreview(false);\n      }\n    );\n  };\n\n  render() {\n    console.log(this.state.formStage);\n    const showEnv = !Boolean(process.env.NEXT_PUBLIC_SFU_ENV);\n    const showRoleSelect = Boolean(process.env.NEXT_PUBLIC_SFU_ENV);\n\n    return (\n      <>\n        {this.state.isSupported && (\n          <div className=\"relative z-0\">\n            {this.state.formStage && this.state.formStage === 'ROOM' && (\n              <>\n                <div\n                  className=\" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\"\n                  style={{\n                    backgroundColor: '#1a1619',\n                    minHeight: 'calc(100vh - 64px)',\n                  }}\n                >\n                  <div className=\"overflow-hidden justify-right items-right shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100\">\n                    <h2 className=\"mt-6 text-center text-3xl leading-9 font-extrabold text-gray-900 mb-2\">\n                      100ms Conference\n                    </h2>\n\n                    <div className=\"mt-6 space-y-2\">\n                      <button\n                        className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none transition duration-150 ease-in-out\"\n                        onClick={() => {\n                          this.setState({ formStage: 'CREATE_ROOM' });\n                        }}\n                      >\n                        Create Room\n                      </button>\n                      <button\n                        className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-indigo-600 bg-white hover:text-indigo-700 hover:border-indigo-700 focus:outline-none border-indigo-600 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                        onClick={() => {\n                          this.setState({ formStage: 'JOIN_ROOM' });\n                        }}\n                      >\n                        Join Room\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </>\n            )}\n\n            {!this.props.loginInfo.roomId &&\n              this.state.formStage &&\n              this.state.formStage === 'CREATE_ROOM' && (\n                <>\n                  <Formik\n                    initialValues={{\n                      roomName: '',\n                      displayName: this.props.loginInfo.displayName,\n                      env: process.env.NEXT_PUBLIC_SFU_ENV || 'prod-in',\n                      role: 'Host',\n                      isRecording: false,\n                    }}\n                    validate={values => {\n                      const errors = {};\n                      if (!values.displayName) {\n                        errors.displayName = 'Required';\n                      }\n                      if (!values.roomName) {\n                        errors.roomName = 'Required';\n                      }\n                      const validRoomPattern = /^[a-zA-Z0-9-.:_]*$/g;\n                      if (!validRoomPattern.test(values.roomName)) {\n                        errors.roomName =\n                          'Accepted characters are a-z, A-Z, 0-9, . - : _';\n                      }\n                      if (showEnv && !values.env) {\n                        errors.env = 'Required';\n                      }\n                      return errors;\n                    }}\n                    onSubmit={values => {\n                      this.setState({ formValues: values });\n                      this.handleCreateSubmit(values);\n                    }}\n                  >\n                    {({ errors, touched, initialValues }) => (\n                      <Form>\n                        <div\n                          className=\" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\"\n                          style={{\n                            backgroundColor: '#1a1619',\n                            minHeight: 'calc(100vh - 64px)',\n                          }}\n                        >\n                          <div className=\"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 p-6 bg-gray-100\">\n                            <div>\n                              <h2 className=\"text-center justify-center items-center text-3xl leading-9 font-extrabold text-gray-900 mb-2\">\n                                {initialValues && (\n                                  <>\n                                    <ArrowLeftIcon\n                                      className=\"text-gray-700 hover:text-black\"\n                                      onClick={() => {\n                                        this.setState({ formStage: 'ROOM' });\n                                        this.props.setLoginInfo({\n                                          roomId: '',\n                                        });\n                                      }}\n                                    />\n                                    100ms Conference\n                                  </>\n                                )}\n                              </h2>\n                            </div>\n                            <div className=\"rounded-m\">\n                              <div>\n                                <LoginTextField\n                                  label=\"Room Name\"\n                                  name=\"roomName\"\n                                  className=\"rounded-t-md\"\n                                  placeholder=\"Room Name\"\n                                  errors={errors.roomName}\n                                  touched={touched.roomName}\n                                />\n                              </div>\n                              <div className=\"-mt-px\">\n                                {initialValues && (\n                                  <LoginTextField\n                                    label=\"Username\"\n                                    name=\"displayName\"\n                                    className={\n                                      !(\n                                        initialValues && !initialValues.roomId\n                                      ) && 'rounded-t-md'\n                                    }\n                                    placeholder=\"Username\"\n                                    errors={errors.displayName}\n                                    touched={touched.displayName}\n                                  />\n                                )}\n                              </div>\n                              <div className=\"-mt-px\">\n                                {initialValues ? (\n                                  showRoleSelect ? (\n                                    <LoginTextField\n                                      label=\"Role\"\n                                      name=\"role\"\n                                      as={showRoleSelect ? 'select' : null}\n                                      className={!showEnv && 'rounded-b-md'}\n                                      placeholder=\"Role\"\n                                      disabled={\n                                        this.props.loginInfo.role ===\n                                        ROLES.VIEWER\n                                      }\n                                      errors={errors.role}\n                                      touched={touched.rol}\n                                    >\n                                      <option value=\"\">Select Role</option>\n                                      {Object.values(ROLES).map(\n                                        (role, index) => (\n                                          <option\n                                            key={index}\n                                            value={role}\n                                            className=\"capitalize\"\n                                          >\n                                            {role}\n                                          </option>\n                                        )\n                                      )}\n                                    </LoginTextField>\n                                  ) : (\n                                    <LoginTextField\n                                      label=\"Role\"\n                                      name=\"role\"\n                                      className={!showEnv && 'rounded-b-md'}\n                                      placeholder=\"Role\"\n                                      disabled={\n                                        this.props.loginInfo.role ===\n                                        ROLES.VIEWER\n                                      }\n                                      errors={errors.role}\n                                      touched={touched.rol}\n                                    />\n                                  )\n                                ) : null}\n                              </div>\n\n                              {showEnv && (\n                                <div className=\"-mt-px\">\n                                  {initialValues && (\n                                    <LoginTextField\n                                      label=\"Environment\"\n                                      name=\"env\"\n                                      className=\"rounded-b-md\"\n                                      placeholder=\"Environment (qa-in/staging-in/prod-in)\"\n                                      errors={errors.env}\n                                      touched={touched.env}\n                                    />\n                                  )}\n                                </div>\n                              )}\n                            </div>\n                            <div className=\"mt-6\">\n                              <label>\n                                <Field type=\"checkbox\" name=\"isRecording\" />\n                                {'  '} Record Room?\n                              </label>\n                            </div>\n\n                            <div className=\"mt-6\">\n                              <button\n                                type=\"submit\"\n                                className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                              >\n                                <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\"></span>\n                                Create Room\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      </Form>\n                    )}\n                  </Formik>\n                </>\n              )}\n            {this.state.formStage && this.state.formStage === 'JOIN_ROOM' && (\n              <>\n                <Formik\n                  initialValues={{\n                    roomId: this.props.loginInfo.roomId\n                      ? this.props.loginInfo.roomId\n                      : '',\n                    displayName: this.props.loginInfo.displayName,\n                    env: this.props.loginInfo.env\n                      ? this.props.loginInfo.env\n                      : '',\n                    role: this.props.loginInfo.role\n                      ? this.props.loginInfo.role\n                      : 'Guest',\n                  }}\n                  validate={values => {\n                    const errors = {};\n                    if (!values.displayName) {\n                      errors.displayName = 'Required';\n                    }\n                    if (!values.roomId) {\n                      errors.roomId = 'Required';\n                    }\n                    if (showEnv && !values.env) {\n                      errors.env = 'Required';\n                    }\n                    return errors;\n                  }}\n                  onSubmit={values => {\n                    this.setState({ formValues: values });\n                    this.handleJoinSubmit(values);\n                  }}\n                >\n                  {({ errors, touched, initialValues }) => (\n                    <Form>\n                      <div\n                        className=\" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\"\n                        style={{\n                          backgroundColor: '#1a1619',\n                          minHeight: 'calc(100vh - 64px)',\n                        }}\n                      >\n                        <div className=\"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 p-6 bg-gray-100\">\n                          <div>\n                            {/* <img className=\"mx-auto h-12 w-auto\" src={logo} /> */}\n\n                            <h2 className=\"text-center text-3xl leading-9 font-extrabold text-gray-900 mb-2\">\n                              {initialValues && (\n                                <>\n                                  <ArrowLeftIcon\n                                    className=\"text-gray-700 hover:text-black\"\n                                    onClick={() => {\n                                      this.setState({ formStage: 'ROOM' });\n                                      this.props.setLoginInfo({\n                                        roomId: '',\n                                      });\n                                    }}\n                                  />\n                                  100ms Conference\n                                </>\n                              )}\n                            </h2>\n                            {initialValues && initialValues.roomId && (\n                              <p className=\"my-2 text-center text-sm leading-5 text-gray-600\">\n                                You are about to join room:{' '}\n                                <span className=\"font-bold\">\n                                  {initialValues.roomId}\n                                </span>\n                              </p>\n                            )}\n                          </div>\n                          <div className=\"rounded-md\">\n                            <div>\n                              {initialValues && !initialValues.roomId && (\n                                <LoginTextField\n                                  label=\"Room ID\"\n                                  name=\"roomId\"\n                                  className=\"rounded-t-md\"\n                                  placeholder=\"Room ID\"\n                                  errors={errors.roomId}\n                                  touched={touched.roomId}\n                                />\n                              )}\n                            </div>\n                            <div className=\"-mt-px\">\n                              {initialValues && (\n                                <LoginTextField\n                                  label=\"Username\"\n                                  name=\"displayName\"\n                                  className={\n                                    !(initialValues && !initialValues.roomId) &&\n                                    'rounded-t-md'\n                                  }\n                                  placeholder=\"Username\"\n                                  errors={errors.displayName}\n                                  touched={touched.displayName}\n                                />\n                              )}\n                            </div>\n                            <div className=\"-mt-px\">\n                              {initialValues ? (\n                                showRoleSelect ? (\n                                  <LoginTextField\n                                    label=\"Role\"\n                                    name=\"role\"\n                                    as={showRoleSelect ? 'select' : null}\n                                    className={!showEnv && 'rounded-b-md'}\n                                    placeholder=\"Role\"\n                                    disabled={\n                                      this.props.loginInfo.role === ROLES.VIEWER\n                                    }\n                                    errors={errors.role}\n                                    touched={touched.rol}\n                                  >\n                                    <option value=\"\">Select Role</option>\n                                    {Object.values(ROLES).map((role, index) => (\n                                      <option\n                                        key={index}\n                                        value={role}\n                                        className=\"capitalize\"\n                                      >\n                                        {role}\n                                      </option>\n                                    ))}\n                                  </LoginTextField>\n                                ) : (\n                                  <LoginTextField\n                                    label=\"Role\"\n                                    name=\"role\"\n                                    className={!showEnv && 'rounded-b-md'}\n                                    placeholder=\"Role\"\n                                    disabled={\n                                      this.props.loginInfo.role === ROLES.VIEWER\n                                    }\n                                    errors={errors.role}\n                                    touched={touched.rol}\n                                  />\n                                )\n                              ) : null}\n                            </div>\n                            {showEnv && (\n                              <div className=\"-mt-px\">\n                                {initialValues && (\n                                  <LoginTextField\n                                    label=\"Environment\"\n                                    name=\"env\"\n                                    className=\"rounded-b-md\"\n                                    placeholder=\"Environment (qa-in/staging-in/prod-in)\"\n                                    errors={errors.env}\n                                    touched={touched.env}\n                                  />\n                                )}\n                              </div>\n                            )}\n                          </div>\n\n                          <div className=\"mt-6\">\n                            <button\n                              type=\"submit\"\n                              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                            >\n                              <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\"></span>\n                              Join Room\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </Form>\n                  )}\n                </Formik>\n              </>\n            )}\n            {this.state.formStage && this.state.formStage === 'PERMISSION' && (\n              <>\n                <div\n                  className=\" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\"\n                  style={{\n                    backgroundColor: '#1a1619',\n                    minHeight: 'calc(100vh - 64px)',\n                  }}\n                >\n                  <div className=\"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100 my-3\">\n                    <div className=\"\">\n                      <h2 className=\"mt-2 text-center text-3xl leading-9 font-extrabold text-gray-900\">\n                        100ms Conference\n                      </h2>\n\n                      <p className=\"mt-2 text-center text-sm leading-5 text-gray-600 mb-2\">\n                        {this.state.permissionText}\n                      </p>\n                      <div className=\"mt-6\">\n                        <button\n                          className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                          onClick={() => {\n                            this.startPreview(true);\n                          }}\n                        >\n                          <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\"></span>\n                          Prompt permission dialog\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </>\n            )}\n            {this.state.formStage && this.state.formStage === 'PREVIEW' && (\n              <>\n                <Formik\n                  initialValues={{\n                    selectedAudioDevice: this.props.settings\n                      ? this.props.settings.selectedAudioDevice\n                      : null,\n                    selectedVideoDevice: this.props.settings\n                      ? this.props.settings.selectedVideoDevice\n                      : null,\n                    // selectedAudioOutputDevice: this.state.settings\n                    //   ? this.state.settings.selectedAudioOutputDevice\n                    //   : null,\n                  }}\n                  validate={values => {\n                    const errors = {};\n                    // if (!values.displayName) {\n                    //   errors.displayName = 'Required';\n                    // }\n                    // if (!values.roomName){\n                    //   errors.roomName = 'Required';\n                    // }\n                    return errors;\n                  }}\n                  onSubmit={values => {\n                    if (window.stream) {\n                      closeMediaStream(window.stream);\n                    }\n                    this.handleSubmit(values);\n                  }}\n                >\n                  {({ values, initialValues }) => (\n                    <Form>\n                      <div\n                        className=\" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\"\n                        style={{\n                          backgroundColor: '#1a1619',\n                          minHeight: 'calc(100vh - 64px)',\n                        }}\n                      >\n                        <div className=\"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100 my-3\">\n                          <div className=\"\">\n                            <h2 className=\"mt-2 text-center text-3xl leading-9 font-extrabold text-gray-900\">\n                              <>100ms Conference</>\n                            </h2>\n                            <p className=\"mt-2 text-center text-sm leading-5 text-gray-600 mb-2\">\n                              You are about to join{' '}\n                              <span className=\"font-semibold\">\n                                {this.state.formValues\n                                  ? this.state.formValues.roomName\n                                  : this.props.loginInfo.roomName}\n                              </span>{' '}\n                              as{' '}\n                              <span className=\"font-semibold\">\n                                {this.state.formValues\n                                  ? this.state.formValues.displayName\n                                  : this.props.loginInfo.displayName}\n                              </span>\n                              <button\n                                className=\"rounded-md px-2 py-1 hover:bg-indigo-500 ml-1 border transition duration-150 ease-in-out\"\n                                onClick={() => {\n                                  this.setState({ formStage: 'JOIN_ROOM' });\n                                }}\n                              >\n                                Change\n                              </button>\n                            </p>\n                          </div>\n                          <div className=\"mb-3\">\n                            <div className=\"relative h-48 bg-black rounded-md mb-1\">\n                              <video\n                                id=\"previewVideo\"\n                                autoPlay\n                                playsInline\n                                muted={true}\n                                className={`rounded-md h-full w-full ${\n                                  !this.props.roomState.localVideoEnabled &&\n                                  'hidden'\n                                }`}\n                              ></video>\n                              {/* {(!this.props.roomState.localVideoEnabled) && (<div id='previewVideo' className=\"rounded-md mb-3 h-full w-full bg-black\"></div>)} */}\n                              <div className=\"absolute bottom-0 w-full flex justify-center pb-1\">\n                                <button\n                                  onClick={e => {\n                                    e.preventDefault();\n                                    const initialValue = this.props.roomState\n                                      .localVideoEnabled;\n                                    this.props.setRoomState({\n                                      localVideoEnabled: !initialValue,\n                                    });\n                                  }}\n                                  className={`py-1 px-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 active:bg-indigo-700 transition duration-150 ease-in-out ${\n                                    this.props.roomState.localVideoEnabled\n                                      ? 'bg-opacity-50 bg-gray-600'\n                                      : 'bg-indigo-600'\n                                  }`}\n                                >\n                                  {this.props.roomState.localVideoEnabled && (\n                                    <svg\n                                      className=\"w-6 h-6\"\n                                      fill=\"none\"\n                                      stroke=\"currentColor\"\n                                      viewBox=\"0 0 24 24\"\n                                      xmlns=\"http://www.w3.org/2000/svg\"\n                                    >\n                                      <path\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                        strokeWidth={2}\n                                        d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"\n                                      />\n                                    </svg>\n                                  )}\n                                  {!this.props.roomState.localVideoEnabled && (\n                                    <svg\n                                      className=\"w-6 h-6\"\n                                      viewBox=\"0 0 24 24\"\n                                      fill=\"none\"\n                                      xmlns=\"http://www.w3.org/2000/svg\"\n                                    >\n                                      <path\n                                        d=\"M15 10L19.553 7.724C19.7054 7.64784 19.8748 7.61188 20.045 7.61955C20.2152 7.62721 20.3806 7.67825 20.5256 7.76781C20.6706 7.85736 20.7902 7.98248 20.8733 8.13127C20.9563 8.28007 20.9999 8.44761 21 8.618V15.382C20.9999 15.5524 20.9563 15.7199 20.8733 15.8687C20.7902 16.0175 20.6706 16.1426 20.5256 16.2322C20.3806 16.3218 20.2152 16.3728 20.045 16.3805C19.8748 16.3881 19.7054 16.3522 19.553 16.276L15 14V10ZM5 18H13C13.5304 18 14.0391 17.7893 14.4142 17.4142C14.7893 17.0391 15 16.5304 15 16V8C15 7.46957 14.7893 6.96086 14.4142 6.58579C14.0391 6.21071 13.5304 6 13 6H5C4.46957 6 3.96086 6.21071 3.58579 6.58579C3.21071 6.96086 3 7.46957 3 8V16C3 16.5304 3.21071 17.0391 3.58579 17.4142C3.96086 17.7893 4.46957 18 5 18Z\"\n                                        stroke=\"currentColor\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                      />\n                                      <line\n                                        x1=\"2.00177\"\n                                        y1=\"19.7113\"\n                                        x2=\"16.1289\"\n                                        y2=\"4.10676\"\n                                        stroke=\"currentColor\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                      />\n                                    </svg>\n                                  )}\n                                </button>\n\n                                <button\n                                  onClick={e => {\n                                    e.preventDefault();\n                                    const initialValue = this.props.roomState\n                                      .localAudioEnabled;\n                                    this.props.setRoomState({\n                                      localAudioEnabled: !initialValue,\n                                    });\n                                  }}\n                                  className={`ml-1 py-1 px-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out ${\n                                    this.props.roomState.localAudioEnabled\n                                      ? 'bg-opacity-50 bg-gray-600'\n                                      : 'bg-indigo-600'\n                                  }`}\n                                >\n                                  {this.props.roomState.localAudioEnabled && (\n                                    <svg\n                                      className=\"w-6 h-6\"\n                                      fill=\"none\"\n                                      stroke=\"currentColor\"\n                                      viewBox=\"0 0 24 24\"\n                                      xmlns=\"http://www.w3.org/2000/svg\"\n                                    >\n                                      <path\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                        strokeWidth=\"2\"\n                                        d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"\n                                      ></path>\n                                    </svg>\n                                  )}\n                                  {!this.props.roomState.localAudioEnabled && (\n                                    <svg\n                                      className=\"h-6 w-6\"\n                                      viewBox=\"0 0 24 24\"\n                                      fill=\"none\"\n                                      xmlns=\"http://www.w3.org/2000/svg\"\n                                    >\n                                      <path\n                                        d=\"M19 11C19 12.8565 18.2625 14.637 16.9497 15.9497C15.637 17.2625 13.8565 18 12 18M12 18C10.1435 18 8.36301 17.2625 7.05025 15.9497C5.7375 14.637 5 12.8565 5 11M12 18V22M12 22H8M12 22H16M12 14C11.2044 14 10.4413 13.6839 9.87868 13.1213C9.31607 12.5587 9 11.7956 9 11V5C9 4.20435 9.31607 3.44129 9.87868 2.87868C10.4413 2.31607 11.2044 2 12 2C12.7956 2 13.5587 2.31607 14.1213 2.87868C14.6839 3.44129 15 4.20435 15 5V11C15 11.7956 14.6839 12.5587 14.1213 13.1213C13.5587 13.6839 12.7956 14 12 14Z\"\n                                        stroke=\"currentColor\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                      />\n                                      <line\n                                        x1=\"4.43121\"\n                                        y1=\"18.0549\"\n                                        x2=\"18.5583\"\n                                        y2=\"2.45033\"\n                                        stroke=\"currentColor\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                      />\n                                    </svg>\n                                  )}\n                                </button>\n                              </div>\n                            </div>\n                            {this.props.roomState.localAudioEnabled && (\n                              <div className=\"px-1\">\n                                <div\n                                  style={{\n                                    width: !this.props.roomState\n                                      .localAudioEnabled\n                                      ? '1px'\n                                      : this.state.audioLevel + 'px',\n                                    height: '4px',\n                                    backgroundColor: '#8dc63f',\n                                  }}\n                                ></div>\n                              </div>\n                            )}\n                          </div>\n                          <div className=\"rounded-md shadow-sm\">\n                            <div>\n                              {initialValues && (\n                                <Field\n                                  label=\"Audio Input\"\n                                  name=\"selectedAudioDevice\"\n                                  className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\"\n                                  placeholder=\"Audio Input\"\n                                  component={SingleSelect}\n                                  options={this.state.audioDevices}\n                                  updateDevice={this.updateDevice}\n                                />\n                              )}\n                            </div>\n                            <div className=\"-mt-px\">\n                              {initialValues && (\n                                <Field\n                                  label=\"Video Input\"\n                                  name=\"selectedVideoDevice\"\n                                  className={`appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5`}\n                                  placeholder=\"Video Input\"\n                                  component={SingleSelect}\n                                  options={this.state.videoDevices}\n                                  updateDevice={this.updateDevice}\n                                />\n                              )}\n                            </div>\n                            {/* <div className=\"-mt-px\">\n                          {initialValues && (\n                            <Field\n                              label=\"Autio Output\"\n                              name=\"selectedAudioOutputDevice\"\n                              className={`appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5`}\n                              placeholder=\"Audio Output\"\n                              component={SingleSelect}\n                              options={this.state.audioOutputDevices}\n                              updateDevice={this.updateDevice}\n                            />\n                          )}\n                        </div> */}\n                          </div>\n\n                          <div className=\"mt-0\">\n                            <button\n                              type=\"submit\"\n                              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                            >\n                              <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\"></span>\n                              Join\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </Form>\n                  )}\n                </Formik>\n              </>\n            )}\n          </div>\n        )}\n        {!this.state.isSupported && (\n          <>\n            <div\n              className=\" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\"\n              style={{\n                backgroundColor: '#1a1619',\n                minHeight: 'calc(100vh - 64px)',\n              }}\n            >\n              <div className=\"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100 my-3\">\n                <div className=\"\">\n                  <h2 className=\"mt-2 text-center text-3xl leading-9 font-extrabold text-gray-900\">\n                    100ms Conference\n                  </h2>\n\n                  <p className=\"mt-2 text-center text-sm leading-5 text-gray-600 mb-2\">\n                    {deviceSupport().failureCause == 'iOS' ? (\n                      <span>\n                        100ms users might face issues on iOS devices. Please\n                        open the link on another device for the best experience.\n                        If you wish to continue on iOS, click continue.\n                      </span>\n                    ) : (\n                      <span>\n                        We recommend using Google Chrome for the best\n                        experience.\n                      </span>\n                    )}\n                  </p>\n                  <div className=\"mt-6\">\n                    {deviceSupport().failureCause == 'browser' && (\n                      <a\n                        className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 hover:text-white focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                        href=\"https://www.google.com/chrome/\"\n                        target=\"_blank\"\n                      >\n                        Download Google Chrome\n                      </a>\n                    )}\n                    <button\n                      className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-indigo-600 bg-white hover:text-indigo-700 hover:border-indigo-700 focus:outline-none border-indigo-600 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out mt-3\"\n                      onClick={() => this.setState({ isSupported: true })}\n                    >\n                      Continue in current browser\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </>\n        )}\n      </>\n    );\n  }\n}\n\nfunction objToStrMap(obj) {\n  const strMap = new Map();\n  for (const k of Object.keys(obj)) {\n    strMap.set(k, obj[k]);\n  }\n  return strMap;\n}\n\nconst WrappedLoginForm = LoginForm;\n//const WrappedLoginForm = Form.create({ name: \"login\" })(LoginForm);\nexport default WrappedLoginForm;\n"]},"metadata":{},"sourceType":"module"}