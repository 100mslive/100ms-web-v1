{"ast":null,"code":"import _regeneratorRuntime from \"/Users/Pravin/Study/nikhil/react/sample-app-web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/Pravin/Study/nikhil/react/sample-app-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/Pravin/Study/nikhil/react/sample-app-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Pravin/Study/nikhil/react/sample-app-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/Pravin/Study/nikhil/react/sample-app-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/Pravin/Study/nikhil/react/sample-app-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"/Users/Pravin/Study/nikhil/react/sample-app-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Pravin/Study/nikhil/react/sample-app-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _defineProperty from \"/Users/Pravin/Study/nikhil/react/sample-app-web/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"/Users/Pravin/Study/nikhil/react/sample-app-web/src/components/LoginForm.jsx\";\nvar __jsx = React.createElement;\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it[\"return\"] != null) it[\"return\"](); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { notification } from 'antd';\nimport { Formik, Form, Field } from 'formik';\nimport { LocalStream } from '@100mslive/hmsvideo-web';\nimport { updateInputDevices, SingleSelect, closeMediaStream, attachMediaStream, getRequest, deviceSupport, getUserMedia, getPermissionStatus } from '../utils';\nimport SoundMeter from './Settings/soundmeter';\nimport ArrowLeftIcon from 'mdi-react/ArrowLeftIcon';\nimport { ROLES } from '../constants';\nimport LoginTextField from './LoginTextField';\n\nvar LoginForm = /*#__PURE__*/function (_React$Component) {\n  _inherits(LoginForm, _React$Component);\n\n  var _super = _createSuper(LoginForm);\n\n  function LoginForm(props) {\n    var _this;\n\n    _classCallCheck(this, LoginForm);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"componentDidMount\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var handleLogin, formStage;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              console.log(\"%c[APP] Role=\".concat(_this.props.loginInfo.role));\n\n              _this.setState({\n                isSupported: deviceSupport().supported\n              });\n\n              _context.next = 4;\n              return _this.updatePermission();\n\n            case 4:\n              console.log({\n                permissionGranted: _this.state.permissionGranted\n              }); //const { form } = this.props;\n\n              console.log('window.location:' + window.location);\n              console.log('url:' + window.location.protocol + window.location.host + '  ' + window.location.pathname + window.location.query); // if (!this.props.settings.codec) {\n              //   this.props.setSettings({\n              //     selectedAudioDevice: '',\n              //     selectedVideoDevice: '',\n              //     // selectedAudioOutputDevice: \"\",\n              //     resolution: 'qvga',\n              //     bandwidth: 256,\n              //     codec: 'vp8',\n              //     isDevMode: true,\n              //   });\n              // }\n\n              if (!(_this.props.loginInfo.role === ROLES.LIVE_RECORD && _this.props.loginInfo.roomId !== '')) {\n                _context.next = 13;\n                break;\n              }\n\n              console.log(\"%c[APP] Skipping audio & video permission promt for the live-record bot\", 'color: blue');\n              handleLogin = _this.props.handleLogin;\n\n              _this.props.setLoginInfo({\n                displayName: null,\n                role: ROLES.LIVE_RECORD\n              });\n\n              handleLogin();\n              return _context.abrupt(\"return\");\n\n            case 13:\n              // ToDo: Show a confirmation dialog for ROLES.VIEWER\n              _this.setState({\n                permissionText: 'We will need your permission to use your webcam and microphone.'\n              });\n\n              if (getRequest() && getRequest().hasOwnProperty('room') && _this.props.loginInfo.displayName !== '' && _this.props.loginInfo.roomId !== '' && _this.props.loginInfo.env !== '') {\n                if (_this.state.permissionGranted) {\n                  console.log('Showing preview');\n\n                  _this.startPreview(true);\n                } else {\n                  _this.setState({\n                    formStage: 'PERMISSION'\n                  });\n                }\n              } else {\n                formStage = 'ROOM';\n                console.log(\"[FormStage: \".concat(formStage, \"]\"));\n\n                if (_this.props.loginInfo.roomId != '') {\n                  formStage = 'JOIN_ROOM';\n                }\n\n                _this.setState({\n                  formStage: formStage\n                });\n              }\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"componentWillUnmount\", function () {\n      _this._cleanup();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_notification\", function (message, description) {\n      var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'info';\n\n      if (type == 'info') {\n        notification.info({\n          message: message,\n          description: description,\n          placement: 'bottomRight'\n        });\n      } else if (type == 'error') {\n        notification.error({\n          message: message,\n          description: description,\n          placement: 'bottomRight'\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"_stopMediaStream\", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(stream) {\n        var tracks, i, len;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                tracks = stream.getTracks();\n                i = 0, len = tracks.length;\n\n              case 2:\n                if (!(i < len)) {\n                  _context2.next = 8;\n                  break;\n                }\n\n                _context2.next = 5;\n                return tracks[i].stop();\n\n              case 5:\n                i++;\n                _context2.next = 2;\n                break;\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"_cleanup\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!_this.stream) {\n                _context3.next = 5;\n                break;\n              }\n\n              _context3.next = 3;\n              return _this._stopMediaStream(_this.stream);\n\n            case 3:\n              _context3.next = 5;\n              return _this.client.unpublish(_this.stream, _this.client.rid);\n\n            case 5:\n              if (!_this.client) {\n                _context3.next = 8;\n                break;\n              }\n\n              _context3.next = 8;\n              return _this.client.leave();\n\n            case 8:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"updateDeviceList\", function (callback) {\n      updateInputDevices().then(function (data) {\n        if (_this.props.settings.selectedAudioDevice === '' && data.audioDevices.length > 0) {\n          _this.props.setSettings({\n            selectedAudioDevice: data.audioDevices[0].deviceId\n          });\n        }\n\n        if (_this.props.settings.selectedVideoDevice === '' && data.videoDevices.length > 0) {\n          _this.props.setSettings({\n            selectedVideoDevice: data.videoDevices[0].deviceId\n          });\n        } // if (\n        //   this.state.settings.selectedAudioOutputDevice === \"\" &&\n        //   data.audioOutputDevices.length > 0\n        // ) {\n        //   console.log(\"setting output device\")\n        //   this.state.settings.selectedAudioOutputDevice =\n        //     data.audioOutputDevices[0].deviceId\n        // }\n\n\n        _this.setState({\n          videoDevices: data.videoDevices,\n          audioDevices: data.audioDevices,\n          audioOutputDevices: data.audioOutputDevices\n        });\n\n        if (callback) {\n          callback();\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleCreateSubmit\", /*#__PURE__*/function () {\n      var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(values) {\n        var endpoint, response, data, roomEntry;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                endpoint = process.env.NEXT_PUBLIC_CREATE_ROOM_ENDPOINT || '/api/room';\n                console.log('endpoint', endpoint);\n                console.log('Create Room values: ', values);\n                _context4.next = 5;\n                return fetch(endpoint, {\n                  method: 'POST',\n                  body: JSON.stringify({\n                    room_name: values.roomName,\n                    recording_info: {\n                      enabled: values.isRecording\n                    },\n                    env: values.env\n                  })\n                })[\"catch\"](function (err) {\n                  console.log('Error', err);\n                });\n\n              case 5:\n                response = _context4.sent;\n                console.log('Response: ', response);\n\n                if (!(response.status != 200)) {\n                  _context4.next = 14;\n                  break;\n                }\n\n                _context4.next = 10;\n                return response.json();\n\n              case 10:\n                data = _context4.sent;\n\n                _this._notification('Error', data.message, 'error');\n\n                _context4.next = 21;\n                break;\n\n              case 14:\n                _context4.next = 16;\n                return response.json();\n\n              case 16:\n                roomEntry = _context4.sent;\n                console.log('response:', roomEntry);\n                values.roomId = roomEntry.id;\n\n                _this._notification('Room Created', \"Room Id: \".concat(values.roomId, \" Room Name: \").concat(values.roomName));\n\n                _this.handleNameSubmit(values);\n\n              case 21:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      return function (_x2) {\n        return _ref4.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"handleJoinSubmit\", function (values) {\n      // TODO: How to get roomName from roomId\n      _this.handleNameSubmit(values);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleNameSubmit\", function (values) {\n      console.log(_this.state.permissionGranted);\n\n      _this.props.setLoginInfo({\n        roomId: values.roomId\n      });\n\n      if (values.roomName) {\n        _this.props.setLoginInfo({\n          roomName: values.roomName\n        });\n      }\n\n      if (values.role) {\n        _this.props.setLoginInfo({\n          role: values.role\n        });\n      }\n\n      if (values.env) {\n        _this.props.setLoginInfo({\n          env: values.env\n        });\n      }\n\n      if (values.displayName) {\n        _this.props.setLoginInfo({\n          displayName: values.displayName\n        });\n      }\n\n      if (_this.props.loginInfo.role === ROLES.VIEWER) {\n        _this.props.handleLogin();\n      } else if (_this.state.permissionGranted) {\n        console.log('Showing preview');\n\n        _this.startPreview(true);\n      } else {\n        _this.setState({\n          formValues: values,\n          formStage: 'PERMISSION'\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\", function (values) {\n      var handleLogin = _this.props.handleLogin;\n      console.log('Values in handleSubmit: ', values);\n      console.log('this.props.loginInfo.roomId in handleSubmit: ', _this.props.loginInfo.roomId);\n      if (values.role) _this.props.setLoginInfo({\n        role: values.role\n      });\n      if (_this.state.formValues) _this.props.setLoginInfo({\n        displayName: _this.state.formValues.displayName || localStorage.getItem('loginInfo.displayName') || '',\n        roomName: _this.state.formValues.roomName,\n        env: _this.state.formValues.env\n      });\n      handleLogin();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updatePermission\", /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n      return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              _context5.next = 2;\n              return getPermissionStatus().then(function (permission) {\n                if (permission) {\n                  _this.setState({\n                    permissionGranted: true\n                  });\n                } else {\n                  _this.setState({\n                    permissionGranted: false\n                  });\n                }\n              })[\"catch\"](function (error) {\n                console.log({\n                  permissionError: error\n                });\n\n                _this.setState({\n                  permissionGranted: false\n                });\n              });\n\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5);\n    })));\n\n    _defineProperty(_assertThisInitialized(_this), \"soundMeterProcess\", function () {\n      var val = window.soundMeter.instant.toFixed(2) * 700 + 1;\n\n      _this.setState({\n        audioLevel: val\n      }); //      if (this.state.visible)\n\n\n      setTimeout(_this.soundMeterProcess, 100);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"startPreview\", function () {\n      var permissionTestMode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      closeMediaStream(window.stream);\n      var audioSource = _this.props.settings.selectedAudioDevice;\n      var videoSource = _this.props.settings.selectedVideoDevice;\n      var videoElement, soundMeterProcess;\n\n      if (!permissionTestMode) {\n        videoElement = document.getElementById('previewVideo'); // this.soundMeter = window.soundMeter = new SoundMeter(window.audioContext);\n        // soundMeterProcess = this.soundMeterProcess;\n      }\n\n      var constraints = {\n        audio: !_this.props.roomState.localAudioEnabled ? true : {\n          deviceId: audioSource ? {\n            exact: audioSource\n          } : undefined\n        },\n        video: !_this.props.roomState.localVideoEnabled ? true : {\n          deviceId: videoSource ? {\n            exact: videoSource\n          } : undefined\n        }\n      };\n      getUserMedia(constraints).then(function (stream) {\n        if (!permissionTestMode) {\n          window.stream = stream; // make stream available to console\n          //videoElement.srcObject = stream;\n\n          attachMediaStream(videoElement, stream); //TODO this throws an error when audio only is chosen. Handle it\n          // if (this.props.roomState.localAudioEnabled) {\n          //   soundMeter.connectToSource(stream);\n          //   setTimeout(soundMeterProcess, 100);\n          // }\n        }\n\n        return navigator.mediaDevices.enumerateDevices(); // Refresh button list in case labels have become available\n      }).then(function (devices) {\n        //TODO combine with updateInputDevices\n        var videoDevices = [];\n        var audioDevices = [];\n        var audioOutputDevices = [];\n\n        var _iterator = _createForOfIteratorHelper(devices),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var device = _step.value;\n\n            if (device.kind === 'videoinput') {\n              videoDevices.push(device);\n            } else if (device.kind === 'audioinput') {\n              audioDevices.push(device);\n            } else if (device.kind === 'audiooutput') {\n              audioOutputDevices.push(device);\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n\n        var data = {\n          videoDevices: videoDevices,\n          audioDevices: audioDevices,\n          audioOutputDevices: audioOutputDevices\n        };\n\n        if (_this.props.settings.selectedAudioDevice === '' && data.audioDevices.length > 0) {\n          _this.props.setSettings({\n            selectedAudioDevice: data.audioDevices[0].deviceId\n          });\n        }\n\n        if (_this.props.settings.selectedVideoDevice === '' && data.videoDevices.length > 0) {\n          _this.props.setSettings({\n            selectedVideoDevice: data.videoDevices[0].deviceId\n          });\n        }\n\n        _this.setState({\n          audioDevices: data.audioDevices,\n          videoDevices: data.videoDevices,\n          permissionGranted: true,\n          formStage: 'PREVIEW'\n        });\n      })[\"catch\"](function (error) {\n        //TODO - look for only permission error. Rest of the errors should be handled\n        _this.props.setLocalStreamError(error);\n\n        _this.setState({\n          permissionGranted: false,\n          permissionText: \"You won't be able to access the meeting unless you grant camera and mic permissions\"\n        });\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"updateDevice\", function (name, value) {\n      _this.props.setSettings(_defineProperty({}, name, value), function () {\n        _this.startPreview(false);\n      });\n    });\n\n    _this.state = {\n      formStage: 'ROOM',\n      permissionGranted: false,\n      isSupported: deviceSupport().supported\n    };\n    var role = '';\n    var roomId = '';\n    var env = process.env.NEXT_PUBLIC_SFU_ENV || 'prod-in';\n    var displayName = localStorage.getItem('loginInfo.displayName') || props.loginInfo.displayName || '';\n\n    if (getRequest() && getRequest().hasOwnProperty('role')) {\n      role = getRequest().role;\n    }\n\n    if (getRequest() && getRequest().hasOwnProperty('room')) {\n      roomId = getRequest().room;\n    }\n\n    if (getRequest() && getRequest().hasOwnProperty('env')) {\n      env = getRequest().env;\n    }\n\n    _this.props.setLoginInfo({\n      role: role,\n      roomId: roomId,\n      env: env,\n      displayName: displayName\n    });\n\n    return _this;\n  }\n\n  _createClass(LoginForm, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if ((prevState.formStage || this.state.formStage) && prevState.formStage !== this.state.formStage) {\n        if (this.state.formStage === 'PREVIEW') {\n          this.startPreview(false); //console.log(\"Start preview called from state change componentDidUpdate preview check\")\n        }\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      console.log(this.state.formStage);\n      var showEnv = !Boolean(process.env.NEXT_PUBLIC_SFU_ENV);\n      var showRoleSelect = Boolean(process.env.NEXT_PUBLIC_SFU_ENV);\n      return __jsx(React.Fragment, null, this.state.isSupported && __jsx(\"div\", {\n        className: \"relative z-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 11\n        }\n      }, this.state.formStage && this.state.formStage === 'ROOM' && __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: \" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\",\n        style: {\n          backgroundColor: '#1a1619',\n          minHeight: 'calc(100vh - 64px)'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 444,\n          columnNumber: 17\n        }\n      }, __jsx(\"div\", {\n        className: \"overflow-hidden justify-right items-right shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 451,\n          columnNumber: 19\n        }\n      }, __jsx(\"h2\", {\n        className: \"mt-6 text-center text-3xl leading-9 font-extrabold text-gray-900 mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 21\n        }\n      }, \"100ms Conference\"), __jsx(\"div\", {\n        className: \"mt-6 space-y-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 456,\n          columnNumber: 21\n        }\n      }, __jsx(\"button\", {\n        className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none transition duration-150 ease-in-out\",\n        onClick: function onClick() {\n          _this2.setState({\n            formStage: 'CREATE_ROOM'\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 23\n        }\n      }, \"Create Room\"), __jsx(\"button\", {\n        className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-indigo-600 bg-white hover:text-indigo-700 hover:border-indigo-700 focus:outline-none border-indigo-600 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n        onClick: function onClick() {\n          _this2.setState({\n            formStage: 'JOIN_ROOM'\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 23\n        }\n      }, \"Join Room\"))))), !this.props.loginInfo.roomId && this.state.formStage && this.state.formStage === 'CREATE_ROOM' && __jsx(React.Fragment, null, __jsx(Formik, {\n        initialValues: {\n          roomName: '',\n          displayName: this.props.loginInfo.displayName,\n          env: process.env.NEXT_PUBLIC_SFU_ENV || 'prod-in',\n          role: 'Host',\n          isRecording: false\n        },\n        validate: function validate(values) {\n          var errors = {};\n\n          if (!values.displayName) {\n            errors.displayName = 'Required';\n          }\n\n          if (!values.roomName) {\n            errors.roomName = 'Required';\n          }\n\n          var validRoomPattern = /^[a-zA-Z0-9-.:_]*$/g;\n\n          if (!validRoomPattern.test(values.roomName)) {\n            errors.roomName = 'Accepted characters are a-z, A-Z, 0-9, . - : _';\n          }\n\n          if (showEnv && !values.env) {\n            errors.env = 'Required';\n          }\n\n          return errors;\n        },\n        onSubmit: function onSubmit(values) {\n          _this2.setState({\n            formValues: values\n          });\n\n          _this2.handleCreateSubmit(values);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 483,\n          columnNumber: 19\n        }\n      }, function (_ref6) {\n        var errors = _ref6.errors,\n            touched = _ref6.touched,\n            initialValues = _ref6.initialValues;\n        return __jsx(Form, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 23\n          }\n        }, __jsx(\"div\", {\n          className: \" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\",\n          style: {\n            backgroundColor: '#1a1619',\n            minHeight: 'calc(100vh - 64px)'\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 516,\n            columnNumber: 25\n          }\n        }, __jsx(\"div\", {\n          className: \"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 p-6 bg-gray-100\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 523,\n            columnNumber: 27\n          }\n        }, __jsx(\"div\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 524,\n            columnNumber: 29\n          }\n        }, __jsx(\"h2\", {\n          className: \"text-center justify-center items-center text-3xl leading-9 font-extrabold text-gray-900 mb-2\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 31\n          }\n        }, initialValues && __jsx(React.Fragment, null, __jsx(ArrowLeftIcon, {\n          className: \"text-gray-700 hover:text-black\",\n          onClick: function onClick() {\n            _this2.setState({\n              formStage: 'ROOM'\n            });\n\n            _this2.props.setLoginInfo({\n              roomId: ''\n            });\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 528,\n            columnNumber: 37\n          }\n        }), \"100ms Conference\"))), __jsx(\"div\", {\n          className: \"rounded-m\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 29\n          }\n        }, __jsx(\"div\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 543,\n            columnNumber: 31\n          }\n        }, __jsx(LoginTextField, {\n          label: \"Room Name\",\n          name: \"roomName\",\n          className: \"rounded-t-md\",\n          placeholder: \"Room Name\",\n          errors: errors.roomName,\n          touched: touched.roomName,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 544,\n            columnNumber: 33\n          }\n        })), __jsx(\"div\", {\n          className: \"-mt-px\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 31\n          }\n        }, initialValues && __jsx(LoginTextField, {\n          label: \"Username\",\n          name: \"displayName\",\n          className: !(initialValues && !initialValues.roomId) && 'rounded-t-md',\n          placeholder: \"Username\",\n          errors: errors.displayName,\n          touched: touched.displayName,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 555,\n            columnNumber: 35\n          }\n        })), __jsx(\"div\", {\n          className: \"-mt-px\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 569,\n            columnNumber: 31\n          }\n        }, initialValues ? showRoleSelect ? __jsx(LoginTextField, {\n          label: \"Role\",\n          name: \"role\",\n          as: showRoleSelect ? 'select' : null,\n          className: !showEnv && 'rounded-b-md',\n          placeholder: \"Role\",\n          disabled: _this2.props.loginInfo.role === ROLES.VIEWER,\n          errors: errors.role,\n          touched: touched.rol,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 37\n          }\n        }, __jsx(\"option\", {\n          value: \"\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 585,\n            columnNumber: 39\n          }\n        }, \"Select Role\"), Object.values(ROLES).map(function (role, index) {\n          return __jsx(\"option\", {\n            key: index,\n            value: role,\n            className: \"capitalize\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 588,\n              columnNumber: 43\n            }\n          }, role);\n        })) : __jsx(LoginTextField, {\n          label: \"Role\",\n          name: \"role\",\n          className: !showEnv && 'rounded-b-md',\n          placeholder: \"Role\",\n          disabled: _this2.props.loginInfo.role === ROLES.VIEWER,\n          errors: errors.role,\n          touched: touched.rol,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 37\n          }\n        }) : null), showEnv && __jsx(\"div\", {\n          className: \"-mt-px\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 616,\n            columnNumber: 33\n          }\n        }, initialValues && __jsx(LoginTextField, {\n          label: \"Environment\",\n          name: \"env\",\n          className: \"rounded-b-md\",\n          placeholder: \"Environment (qa-in/staging-in/prod-in)\",\n          errors: errors.env,\n          touched: touched.env,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 618,\n            columnNumber: 37\n          }\n        }))), __jsx(\"div\", {\n          className: \"mt-6\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 630,\n            columnNumber: 29\n          }\n        }, __jsx(\"label\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 631,\n            columnNumber: 31\n          }\n        }, __jsx(Field, {\n          type: \"checkbox\",\n          name: \"isRecording\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 632,\n            columnNumber: 33\n          }\n        }), '  ', \" Record Room?\")), __jsx(\"div\", {\n          className: \"mt-6\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 637,\n            columnNumber: 29\n          }\n        }, __jsx(\"button\", {\n          type: \"submit\",\n          className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 31\n          }\n        }, __jsx(\"span\", {\n          className: \"absolute left-0 inset-y-0 flex items-center pl-3\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 642,\n            columnNumber: 33\n          }\n        }), \"Create Room\")))));\n      })), this.state.formStage && this.state.formStage === 'JOIN_ROOM' && __jsx(React.Fragment, null, __jsx(Formik, {\n        initialValues: {\n          roomId: this.props.loginInfo.roomId ? this.props.loginInfo.roomId : '',\n          displayName: this.props.loginInfo.displayName,\n          env: this.props.loginInfo.env ? this.props.loginInfo.env : '',\n          role: this.props.loginInfo.role ? this.props.loginInfo.role : 'Guest'\n        },\n        validate: function validate(values) {\n          var errors = {};\n\n          if (!values.displayName) {\n            errors.displayName = 'Required';\n          }\n\n          if (!values.roomId) {\n            errors.roomId = 'Required';\n          }\n\n          if (showEnv && !values.env) {\n            errors.env = 'Required';\n          }\n\n          return errors;\n        },\n        onSubmit: function onSubmit(values) {\n          _this2.setState({\n            formValues: values\n          });\n\n          _this2.handleJoinSubmit(values);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 655,\n          columnNumber: 17\n        }\n      }, function (_ref7) {\n        var errors = _ref7.errors,\n            touched = _ref7.touched,\n            initialValues = _ref7.initialValues;\n        return __jsx(Form, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 687,\n            columnNumber: 21\n          }\n        }, __jsx(\"div\", {\n          className: \" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\",\n          style: {\n            backgroundColor: '#0B0F15',\n            minHeight: 'calc(100vh - 64px)'\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 688,\n            columnNumber: 23\n          }\n        }, __jsx(\"div\", {\n          className: \"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 p-6 bg-gray-100\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 695,\n            columnNumber: 25\n          }\n        }, __jsx(\"div\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 696,\n            columnNumber: 27\n          }\n        }, __jsx(\"h2\", {\n          className: \"text-center text-3xl leading-9 font-extrabold text-gray-900 mb-2\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 699,\n            columnNumber: 29\n          }\n        }, initialValues && __jsx(React.Fragment, null, __jsx(ArrowLeftIcon, {\n          className: \"text-gray-700 hover:text-black\",\n          onClick: function onClick() {\n            _this2.setState({\n              formStage: 'ROOM'\n            });\n\n            _this2.props.setLoginInfo({\n              roomId: ''\n            });\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 702,\n            columnNumber: 35\n          }\n        }), \"100ms Conference\")), initialValues && initialValues.roomId && __jsx(\"p\", {\n          className: \"my-2 text-center text-sm leading-5 text-gray-600\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 716,\n            columnNumber: 31\n          }\n        }, \"You are about to join room:\", ' ', __jsx(\"span\", {\n          className: \"font-bold\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 33\n          }\n        }, initialValues.roomId))), __jsx(\"div\", {\n          className: \"rounded-md\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 724,\n            columnNumber: 27\n          }\n        }, __jsx(\"div\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 29\n          }\n        }, initialValues && !initialValues.roomId && __jsx(LoginTextField, {\n          label: \"Room ID\",\n          name: \"roomId\",\n          className: \"rounded-t-md\",\n          placeholder: \"Room ID\",\n          errors: errors.roomId,\n          touched: touched.roomId,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 727,\n            columnNumber: 33\n          }\n        })), __jsx(\"div\", {\n          className: \"-mt-px\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 737,\n            columnNumber: 29\n          }\n        }, initialValues && __jsx(LoginTextField, {\n          label: \"Username\",\n          name: \"displayName\",\n          className: !(initialValues && !initialValues.roomId) && 'rounded-t-md',\n          placeholder: \"Username\",\n          errors: errors.displayName,\n          touched: touched.displayName,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 739,\n            columnNumber: 33\n          }\n        })), __jsx(\"div\", {\n          className: \"-mt-px\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 752,\n            columnNumber: 29\n          }\n        }, initialValues ? showRoleSelect ? __jsx(LoginTextField, {\n          label: \"Role\",\n          name: \"role\",\n          as: showRoleSelect ? 'select' : null,\n          className: !showEnv && 'rounded-b-md',\n          placeholder: \"Role\",\n          disabled: _this2.props.loginInfo.role === ROLES.VIEWER,\n          errors: errors.role,\n          touched: touched.rol,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 755,\n            columnNumber: 35\n          }\n        }, __jsx(\"option\", {\n          value: \"\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 767,\n            columnNumber: 37\n          }\n        }, \"Select Role\"), Object.values(ROLES).map(function (role, index) {\n          return __jsx(\"option\", {\n            key: index,\n            value: role,\n            className: \"capitalize\",\n            __self: _this2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 769,\n              columnNumber: 39\n            }\n          }, role);\n        })) : __jsx(LoginTextField, {\n          label: \"Role\",\n          name: \"role\",\n          className: !showEnv && 'rounded-b-md',\n          placeholder: \"Role\",\n          disabled: _this2.props.loginInfo.role === ROLES.VIEWER,\n          errors: errors.role,\n          touched: touched.rol,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 779,\n            columnNumber: 35\n          }\n        }) : null), showEnv && __jsx(\"div\", {\n          className: \"-mt-px\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 794,\n            columnNumber: 31\n          }\n        }, initialValues && __jsx(LoginTextField, {\n          label: \"Environment\",\n          name: \"env\",\n          className: \"rounded-b-md\",\n          placeholder: \"Environment (qa-in/staging-in/prod-in)\",\n          errors: errors.env,\n          touched: touched.env,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 796,\n            columnNumber: 35\n          }\n        }))), __jsx(\"div\", {\n          className: \"mt-6\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 809,\n            columnNumber: 27\n          }\n        }, __jsx(\"button\", {\n          type: \"submit\",\n          className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 810,\n            columnNumber: 29\n          }\n        }, __jsx(\"span\", {\n          className: \"absolute left-0 inset-y-0 flex items-center pl-3\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 814,\n            columnNumber: 31\n          }\n        }), \"Join Room\")))));\n      })), this.state.formStage && this.state.formStage === 'PERMISSION' && __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: \" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\",\n        style: {\n          backgroundColor: '#1a1619',\n          minHeight: 'calc(100vh - 64px)'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 827,\n          columnNumber: 17\n        }\n      }, __jsx(\"div\", {\n        className: \"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100 my-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 834,\n          columnNumber: 19\n        }\n      }, __jsx(\"div\", {\n        className: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 835,\n          columnNumber: 21\n        }\n      }, __jsx(\"h2\", {\n        className: \"mt-2 text-center text-3xl leading-9 font-extrabold text-gray-900\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 836,\n          columnNumber: 23\n        }\n      }, \"100ms Conference\"), __jsx(\"p\", {\n        className: \"mt-2 text-center text-sm leading-5 text-gray-600 mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 840,\n          columnNumber: 23\n        }\n      }, this.state.permissionText), __jsx(\"div\", {\n        className: \"mt-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 843,\n          columnNumber: 23\n        }\n      }, __jsx(\"button\", {\n        className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n        onClick: function onClick() {\n          _this2.startPreview(true);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 844,\n          columnNumber: 25\n        }\n      }, __jsx(\"span\", {\n        className: \"absolute left-0 inset-y-0 flex items-center pl-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 850,\n          columnNumber: 27\n        }\n      }), \"Prompt permission dialog\")))))), this.state.formStage && this.state.formStage === 'PREVIEW' && __jsx(React.Fragment, null, __jsx(Formik, {\n        initialValues: {\n          selectedAudioDevice: this.props.settings ? this.props.settings.selectedAudioDevice : null,\n          selectedVideoDevice: this.props.settings ? this.props.settings.selectedVideoDevice : null // selectedAudioOutputDevice: this.state.settings\n          //   ? this.state.settings.selectedAudioOutputDevice\n          //   : null,\n\n        },\n        validate: function validate(values) {\n          var errors = {}; // if (!values.displayName) {\n          //   errors.displayName = 'Required';\n          // }\n          // if (!values.roomName){\n          //   errors.roomName = 'Required';\n          // }\n\n          return errors;\n        },\n        onSubmit: function onSubmit(values) {\n          if (window.stream) {\n            closeMediaStream(window.stream);\n          }\n\n          _this2.handleSubmit(values);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 861,\n          columnNumber: 17\n        }\n      }, function (_ref8) {\n        var values = _ref8.values,\n            initialValues = _ref8.initialValues;\n        return __jsx(Form, {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 891,\n            columnNumber: 21\n          }\n        }, __jsx(\"div\", {\n          className: \" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\",\n          style: {\n            backgroundColor: '#1a1619',\n            minHeight: 'calc(100vh - 64px)'\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 892,\n            columnNumber: 23\n          }\n        }, __jsx(\"div\", {\n          className: \"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100 my-3\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 899,\n            columnNumber: 25\n          }\n        }, __jsx(\"div\", {\n          className: \"\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 900,\n            columnNumber: 27\n          }\n        }, __jsx(\"h2\", {\n          className: \"mt-2 text-center text-3xl leading-9 font-extrabold text-gray-900\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 901,\n            columnNumber: 29\n          }\n        }, __jsx(React.Fragment, null, \"100ms Conference\")), __jsx(\"p\", {\n          className: \"mt-2 text-center text-sm leading-5 text-gray-600 mb-2\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 904,\n            columnNumber: 29\n          }\n        }, \"You are about to join\", ' ', __jsx(\"span\", {\n          className: \"font-semibold\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 906,\n            columnNumber: 31\n          }\n        }, _this2.state.formValues ? _this2.state.formValues.roomName : _this2.props.loginInfo.roomName), ' ', \"as\", ' ', __jsx(\"span\", {\n          className: \"font-semibold\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 912,\n            columnNumber: 31\n          }\n        }, _this2.state.formValues ? _this2.state.formValues.displayName : _this2.props.loginInfo.displayName), __jsx(\"button\", {\n          className: \"rounded-md px-2 py-1 hover:bg-indigo-500 ml-1 border transition duration-150 ease-in-out\",\n          onClick: function onClick() {\n            _this2.setState({\n              formStage: 'JOIN_ROOM'\n            });\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 917,\n            columnNumber: 31\n          }\n        }, \"Change\"))), __jsx(\"div\", {\n          className: \"mb-3\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 927,\n            columnNumber: 27\n          }\n        }, __jsx(\"div\", {\n          className: \"relative h-48 bg-black rounded-md mb-1\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 928,\n            columnNumber: 29\n          }\n        }, __jsx(\"video\", {\n          id: \"previewVideo\",\n          autoPlay: true,\n          playsInline: true,\n          muted: true,\n          className: \"rounded-md h-full w-full \".concat(!_this2.props.roomState.localVideoEnabled && 'hidden'),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 929,\n            columnNumber: 31\n          }\n        }), __jsx(\"div\", {\n          className: \"absolute bottom-0 w-full flex justify-center pb-1\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 940,\n            columnNumber: 31\n          }\n        }, __jsx(\"button\", {\n          onClick: function onClick(e) {\n            e.preventDefault();\n            var initialValue = _this2.props.roomState.localVideoEnabled;\n\n            _this2.props.setRoomState({\n              localVideoEnabled: !initialValue\n            });\n          },\n          className: \"py-1 px-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 active:bg-indigo-700 transition duration-150 ease-in-out \".concat(_this2.props.roomState.localVideoEnabled ? 'bg-opacity-50 bg-gray-600' : 'bg-indigo-600'),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 941,\n            columnNumber: 33\n          }\n        }, _this2.props.roomState.localVideoEnabled && __jsx(\"svg\", {\n          className: \"w-6 h-6\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 957,\n            columnNumber: 37\n          }\n        }, __jsx(\"path\", {\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          strokeWidth: 2,\n          d: \"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 964,\n            columnNumber: 39\n          }\n        })), !_this2.props.roomState.localVideoEnabled && __jsx(\"svg\", {\n          className: \"w-6 h-6\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 973,\n            columnNumber: 37\n          }\n        }, __jsx(\"path\", {\n          d: \"M15 10L19.553 7.724C19.7054 7.64784 19.8748 7.61188 20.045 7.61955C20.2152 7.62721 20.3806 7.67825 20.5256 7.76781C20.6706 7.85736 20.7902 7.98248 20.8733 8.13127C20.9563 8.28007 20.9999 8.44761 21 8.618V15.382C20.9999 15.5524 20.9563 15.7199 20.8733 15.8687C20.7902 16.0175 20.6706 16.1426 20.5256 16.2322C20.3806 16.3218 20.2152 16.3728 20.045 16.3805C19.8748 16.3881 19.7054 16.3522 19.553 16.276L15 14V10ZM5 18H13C13.5304 18 14.0391 17.7893 14.4142 17.4142C14.7893 17.0391 15 16.5304 15 16V8C15 7.46957 14.7893 6.96086 14.4142 6.58579C14.0391 6.21071 13.5304 6 13 6H5C4.46957 6 3.96086 6.21071 3.58579 6.58579C3.21071 6.96086 3 7.46957 3 8V16C3 16.5304 3.21071 17.0391 3.58579 17.4142C3.96086 17.7893 4.46957 18 5 18Z\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 979,\n            columnNumber: 39\n          }\n        }), __jsx(\"line\", {\n          x1: \"2.00177\",\n          y1: \"19.7113\",\n          x2: \"16.1289\",\n          y2: \"4.10676\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 986,\n            columnNumber: 39\n          }\n        }))), __jsx(\"button\", {\n          onClick: function onClick(e) {\n            e.preventDefault();\n            var initialValue = _this2.props.roomState.localAudioEnabled;\n\n            _this2.props.setRoomState({\n              localAudioEnabled: !initialValue\n            });\n          },\n          className: \"ml-1 py-1 px-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out \".concat(_this2.props.roomState.localAudioEnabled ? 'bg-opacity-50 bg-gray-600' : 'bg-indigo-600'),\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1000,\n            columnNumber: 33\n          }\n        }, _this2.props.roomState.localAudioEnabled && __jsx(\"svg\", {\n          className: \"w-6 h-6\",\n          fill: \"none\",\n          stroke: \"currentColor\",\n          viewBox: \"0 0 24 24\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1016,\n            columnNumber: 37\n          }\n        }, __jsx(\"path\", {\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          strokeWidth: \"2\",\n          d: \"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1023,\n            columnNumber: 39\n          }\n        })), !_this2.props.roomState.localAudioEnabled && __jsx(\"svg\", {\n          className: \"h-6 w-6\",\n          viewBox: \"0 0 24 24\",\n          fill: \"none\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1032,\n            columnNumber: 37\n          }\n        }, __jsx(\"path\", {\n          d: \"M19 11C19 12.8565 18.2625 14.637 16.9497 15.9497C15.637 17.2625 13.8565 18 12 18M12 18C10.1435 18 8.36301 17.2625 7.05025 15.9497C5.7375 14.637 5 12.8565 5 11M12 18V22M12 22H8M12 22H16M12 14C11.2044 14 10.4413 13.6839 9.87868 13.1213C9.31607 12.5587 9 11.7956 9 11V5C9 4.20435 9.31607 3.44129 9.87868 2.87868C10.4413 2.31607 11.2044 2 12 2C12.7956 2 13.5587 2.31607 14.1213 2.87868C14.6839 3.44129 15 4.20435 15 5V11C15 11.7956 14.6839 12.5587 14.1213 13.1213C13.5587 13.6839 12.7956 14 12 14Z\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1038,\n            columnNumber: 39\n          }\n        }), __jsx(\"line\", {\n          x1: \"4.43121\",\n          y1: \"18.0549\",\n          x2: \"18.5583\",\n          y2: \"2.45033\",\n          stroke: \"currentColor\",\n          strokeWidth: \"2\",\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1045,\n            columnNumber: 39\n          }\n        }))))), _this2.props.roomState.localAudioEnabled && __jsx(\"div\", {\n          className: \"px-1\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1061,\n            columnNumber: 31\n          }\n        }, __jsx(\"div\", {\n          style: {\n            width: !_this2.props.roomState.localAudioEnabled ? '1px' : _this2.state.audioLevel + 'px',\n            height: '4px',\n            backgroundColor: '#8dc63f'\n          },\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1062,\n            columnNumber: 33\n          }\n        }))), __jsx(\"div\", {\n          className: \"rounded-md shadow-sm\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1075,\n            columnNumber: 27\n          }\n        }, __jsx(\"div\", {\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1076,\n            columnNumber: 29\n          }\n        }, initialValues && __jsx(Field, {\n          label: \"Audio Input\",\n          name: \"selectedAudioDevice\",\n          className: \"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\",\n          placeholder: \"Audio Input\",\n          component: SingleSelect,\n          options: _this2.state.audioDevices,\n          updateDevice: _this2.updateDevice,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1078,\n            columnNumber: 33\n          }\n        })), __jsx(\"div\", {\n          className: \"-mt-px\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1089,\n            columnNumber: 29\n          }\n        }, initialValues && __jsx(Field, {\n          label: \"Video Input\",\n          name: \"selectedVideoDevice\",\n          className: \"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\",\n          placeholder: \"Video Input\",\n          component: SingleSelect,\n          options: _this2.state.videoDevices,\n          updateDevice: _this2.updateDevice,\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1091,\n            columnNumber: 33\n          }\n        }))), __jsx(\"div\", {\n          className: \"mt-0\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1117,\n            columnNumber: 27\n          }\n        }, __jsx(\"button\", {\n          type: \"submit\",\n          className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1118,\n            columnNumber: 29\n          }\n        }, __jsx(\"span\", {\n          className: \"absolute left-0 inset-y-0 flex items-center pl-3\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 1122,\n            columnNumber: 31\n          }\n        }), \"Join\")))));\n      }))), !this.state.isSupported && __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: \" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\",\n        style: {\n          backgroundColor: '#1a1619',\n          minHeight: 'calc(100vh - 64px)'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1137,\n          columnNumber: 13\n        }\n      }, __jsx(\"div\", {\n        className: \"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100 my-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1144,\n          columnNumber: 15\n        }\n      }, __jsx(\"div\", {\n        className: \"\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1145,\n          columnNumber: 17\n        }\n      }, __jsx(\"h2\", {\n        className: \"mt-2 text-center text-3xl leading-9 font-extrabold text-gray-900\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1146,\n          columnNumber: 19\n        }\n      }, \"100ms Conference\"), __jsx(\"p\", {\n        className: \"mt-2 text-center text-sm leading-5 text-gray-600 mb-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1150,\n          columnNumber: 19\n        }\n      }, deviceSupport().failureCause == 'iOS' ? __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1152,\n          columnNumber: 23\n        }\n      }, \"100ms users might face issues on iOS devices. Please open the link on another device for the best experience. If you wish to continue on iOS, click continue.\") : __jsx(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1158,\n          columnNumber: 23\n        }\n      }, \"We recommend using Google Chrome for the best experience.\")), __jsx(\"div\", {\n        className: \"mt-6\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1164,\n          columnNumber: 19\n        }\n      }, deviceSupport().failureCause == 'browser' && __jsx(\"a\", {\n        className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 hover:text-white focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\",\n        href: \"https://www.google.com/chrome/\",\n        target: \"_blank\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1166,\n          columnNumber: 23\n        }\n      }, \"Download Google Chrome\"), __jsx(\"button\", {\n        className: \"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-indigo-600 bg-white hover:text-indigo-700 hover:border-indigo-700 focus:outline-none border-indigo-600 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out mt-3\",\n        onClick: function onClick() {\n          return _this2.setState({\n            isSupported: true\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1174,\n          columnNumber: 21\n        }\n      }, \"Continue in current browser\")))))));\n    }\n  }]);\n\n  return LoginForm;\n}(React.Component);\n\nfunction objToStrMap(obj) {\n  var strMap = new Map();\n\n  for (var _i = 0, _Object$keys = Object.keys(obj); _i < _Object$keys.length; _i++) {\n    var k = _Object$keys[_i];\n    strMap.set(k, obj[k]);\n  }\n\n  return strMap;\n}\n\nvar WrappedLoginForm = LoginForm; //const WrappedLoginForm = Form.create({ name: \"login\" })(LoginForm);\n\nexport default WrappedLoginForm;","map":{"version":3,"sources":["/Users/Pravin/Study/nikhil/react/sample-app-web/src/components/LoginForm.jsx"],"names":["React","notification","Formik","Form","Field","LocalStream","updateInputDevices","SingleSelect","closeMediaStream","attachMediaStream","getRequest","deviceSupport","getUserMedia","getPermissionStatus","SoundMeter","ArrowLeftIcon","ROLES","LoginTextField","LoginForm","props","console","log","loginInfo","role","setState","isSupported","supported","updatePermission","permissionGranted","state","window","location","protocol","host","pathname","query","LIVE_RECORD","roomId","handleLogin","setLoginInfo","displayName","permissionText","hasOwnProperty","env","startPreview","formStage","_cleanup","message","description","type","info","placement","error","stream","tracks","getTracks","i","len","length","stop","_stopMediaStream","client","unpublish","rid","leave","callback","then","data","settings","selectedAudioDevice","audioDevices","setSettings","deviceId","selectedVideoDevice","videoDevices","audioOutputDevices","values","endpoint","process","NEXT_PUBLIC_CREATE_ROOM_ENDPOINT","fetch","method","body","JSON","stringify","room_name","roomName","recording_info","enabled","isRecording","err","response","status","json","_notification","roomEntry","id","handleNameSubmit","VIEWER","formValues","localStorage","getItem","permission","permissionError","val","soundMeter","instant","toFixed","audioLevel","setTimeout","soundMeterProcess","permissionTestMode","audioSource","videoSource","videoElement","document","getElementById","constraints","audio","roomState","localAudioEnabled","exact","undefined","video","localVideoEnabled","navigator","mediaDevices","enumerateDevices","devices","device","kind","push","setLocalStreamError","name","value","NEXT_PUBLIC_SFU_ENV","room","prevProps","prevState","showEnv","Boolean","showRoleSelect","backgroundColor","minHeight","errors","validRoomPattern","test","handleCreateSubmit","touched","initialValues","rol","Object","map","index","handleJoinSubmit","handleSubmit","e","preventDefault","initialValue","setRoomState","width","height","updateDevice","failureCause","Component","objToStrMap","obj","strMap","Map","keys","k","set","WrappedLoginForm"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { notification } from 'antd';\nimport { Formik, Form, Field } from 'formik';\nimport { LocalStream } from '@100mslive/hmsvideo-web';\nimport {\n  updateInputDevices,\n  SingleSelect,\n  closeMediaStream,\n  attachMediaStream,\n  getRequest,\n  deviceSupport,\n  getUserMedia,\n  getPermissionStatus,\n} from '../utils';\nimport SoundMeter from './Settings/soundmeter';\n\nimport ArrowLeftIcon from 'mdi-react/ArrowLeftIcon';\n\nimport { ROLES } from '../constants';\nimport LoginTextField from './LoginTextField';\n\nclass LoginForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      formStage: 'ROOM',\n      permissionGranted: false,\n      isSupported: deviceSupport().supported,\n    };\n\n    let role = '';\n    let roomId = '';\n    let env = process.env.NEXT_PUBLIC_SFU_ENV || 'prod-in';\n    let displayName =\n      localStorage.getItem('loginInfo.displayName') ||\n      props.loginInfo.displayName ||\n      '';\n\n    if (getRequest() && getRequest().hasOwnProperty('role')) {\n      role = getRequest().role;\n    }\n    if (getRequest() && getRequest().hasOwnProperty('room')) {\n      roomId = getRequest().room;\n    }\n    if (getRequest() && getRequest().hasOwnProperty('env')) {\n      env = getRequest().env;\n    }\n\n    this.props.setLoginInfo({\n      role,\n      roomId,\n      env,\n      displayName,\n    });\n  }\n\n  componentDidMount = async () => {\n    console.log(`%c[APP] Role=${this.props.loginInfo.role}`);\n\n    this.setState({\n      isSupported: deviceSupport().supported,\n    });\n\n    await this.updatePermission();\n\n    console.log({ permissionGranted: this.state.permissionGranted });\n    //const { form } = this.props;\n    console.log('window.location:' + window.location);\n    console.log(\n      'url:' +\n        window.location.protocol +\n        window.location.host +\n        '  ' +\n        window.location.pathname +\n        window.location.query\n    );\n\n    // if (!this.props.settings.codec) {\n    //   this.props.setSettings({\n    //     selectedAudioDevice: '',\n    //     selectedVideoDevice: '',\n    //     // selectedAudioOutputDevice: \"\",\n    //     resolution: 'qvga',\n    //     bandwidth: 256,\n    //     codec: 'vp8',\n    //     isDevMode: true,\n    //   });\n    // }\n\n    if (\n      this.props.loginInfo.role === ROLES.LIVE_RECORD &&\n      this.props.loginInfo.roomId !== ''\n    ) {\n      console.log(\n        `%c[APP] Skipping audio & video permission promt for the live-record bot`,\n        'color: blue'\n      );\n      const handleLogin = this.props.handleLogin;\n      this.props.setLoginInfo({\n        displayName: null,\n        role: ROLES.LIVE_RECORD,\n      });\n      handleLogin();\n      return;\n    }\n\n    // ToDo: Show a confirmation dialog for ROLES.VIEWER\n\n    this.setState({\n      permissionText:\n        'We will need your permission to use your webcam and microphone.',\n    });\n\n    if (\n      getRequest() &&\n      getRequest().hasOwnProperty('room') &&\n      this.props.loginInfo.displayName !== '' &&\n      this.props.loginInfo.roomId !== '' &&\n      this.props.loginInfo.env !== ''\n    ) {\n      if (this.state.permissionGranted) {\n        console.log('Showing preview');\n        this.startPreview(true);\n      } else {\n        this.setState({ formStage: 'PERMISSION' });\n      }\n    } else {\n      let formStage = 'ROOM';\n      console.log(`[FormStage: ${formStage}]`);\n      if (this.props.loginInfo.roomId != '') {\n        formStage = 'JOIN_ROOM';\n      }\n      this.setState({ formStage: formStage });\n    }\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      (prevState.formStage || this.state.formStage) &&\n      prevState.formStage !== this.state.formStage\n    ) {\n      if (this.state.formStage === 'PREVIEW') {\n        this.startPreview(false);\n        //console.log(\"Start preview called from state change componentDidUpdate preview check\")\n      }\n    }\n  }\n\n  componentWillUnmount = () => {\n    this._cleanup();\n  };\n\n  _notification = (message, description, type = 'info') => {\n    if (type == 'info') {\n      notification.info({\n        message: message,\n        description: description,\n        placement: 'bottomRight',\n      });\n    } else if (type == 'error') {\n      notification.error({\n        message: message,\n        description: description,\n        placement: 'bottomRight',\n      });\n    }\n  };\n\n  _stopMediaStream = async stream => {\n    let tracks = stream.getTracks();\n    for (let i = 0, len = tracks.length; i < len; i++) {\n      await tracks[i].stop();\n    }\n  };\n\n  _cleanup = async () => {\n    if (this.stream) {\n      await this._stopMediaStream(this.stream);\n      await this.client.unpublish(this.stream, this.client.rid);\n    }\n    if (this.client) await this.client.leave();\n  };\n\n  updateDeviceList = callback => {\n    updateInputDevices().then(data => {\n      if (\n        this.props.settings.selectedAudioDevice === '' &&\n        data.audioDevices.length > 0\n      ) {\n        this.props.setSettings({\n          selectedAudioDevice: data.audioDevices[0].deviceId,\n        });\n      }\n      if (\n        this.props.settings.selectedVideoDevice === '' &&\n        data.videoDevices.length > 0\n      ) {\n        this.props.setSettings({\n          selectedVideoDevice: data.videoDevices[0].deviceId,\n        });\n      }\n\n      // if (\n      //   this.state.settings.selectedAudioOutputDevice === \"\" &&\n      //   data.audioOutputDevices.length > 0\n      // ) {\n      //   console.log(\"setting output device\")\n      //   this.state.settings.selectedAudioOutputDevice =\n      //     data.audioOutputDevices[0].deviceId\n      // }\n\n      this.setState({\n        videoDevices: data.videoDevices,\n        audioDevices: data.audioDevices,\n        audioOutputDevices: data.audioOutputDevices,\n      });\n      if (callback) {\n        callback();\n      }\n    });\n  };\n\n  handleCreateSubmit = async values => {\n    const endpoint =\n      process.env.NEXT_PUBLIC_CREATE_ROOM_ENDPOINT || '/api/room';\n    console.log('endpoint', endpoint);\n    console.log('Create Room values: ', values);\n    const response = await fetch(endpoint, {\n      method: 'POST',\n      body: JSON.stringify({\n        room_name: values.roomName,\n        recording_info: {\n          enabled: values.isRecording,\n        },\n        env: values.env,\n      }),\n    }).catch(err => {\n      console.log('Error', err);\n    });\n\n    console.log('Response: ', response);\n    if (response.status != 200) {\n      const data = await response.json();\n      this._notification('Error', data.message, 'error');\n    } else {\n      const roomEntry = await response.json();\n      console.log('response:', roomEntry);\n      values.roomId = roomEntry.id;\n      this._notification(\n        'Room Created',\n        `Room Id: ${values.roomId} Room Name: ${values.roomName}`\n      );\n      this.handleNameSubmit(values);\n    }\n  };\n\n  handleJoinSubmit = values => {\n    // TODO: How to get roomName from roomId\n    this.handleNameSubmit(values);\n  };\n\n  handleNameSubmit = values => {\n    console.log(this.state.permissionGranted);\n    this.props.setLoginInfo({\n      roomId: values.roomId,\n    });\n    if (values.roomName) {\n      this.props.setLoginInfo({\n        roomName: values.roomName,\n      });\n    }\n    if (values.role) {\n      this.props.setLoginInfo({\n        role: values.role,\n      });\n    }\n    if (values.env) {\n      this.props.setLoginInfo({\n        env: values.env,\n      });\n    }\n    if (values.displayName) {\n      this.props.setLoginInfo({\n        displayName: values.displayName,\n      });\n    }\n\n    if (this.props.loginInfo.role === ROLES.VIEWER) {\n      this.props.handleLogin();\n    } else if (this.state.permissionGranted) {\n      console.log('Showing preview');\n      this.startPreview(true);\n    } else {\n      this.setState({ formValues: values, formStage: 'PERMISSION' });\n    }\n  };\n\n  handleSubmit = values => {\n    const handleLogin = this.props.handleLogin;\n    console.log('Values in handleSubmit: ', values);\n    console.log(\n      'this.props.loginInfo.roomId in handleSubmit: ',\n      this.props.loginInfo.roomId\n    );\n    if (values.role) this.props.setLoginInfo({ role: values.role });\n    if (this.state.formValues)\n      this.props.setLoginInfo({\n        displayName:\n          this.state.formValues.displayName ||\n          localStorage.getItem('loginInfo.displayName') ||\n          '',\n        roomName: this.state.formValues.roomName,\n        env: this.state.formValues.env,\n      });\n    handleLogin();\n  };\n\n  updatePermission = async () => {\n    await getPermissionStatus()\n      .then(permission => {\n        if (permission) {\n          this.setState({ permissionGranted: true });\n        } else {\n          this.setState({ permissionGranted: false });\n        }\n      })\n      .catch(error => {\n        console.log({ permissionError: error });\n        this.setState({ permissionGranted: false });\n      });\n  };\n\n  soundMeterProcess = () => {\n    var val = window.soundMeter.instant.toFixed(2) * 700 + 1;\n    this.setState({ audioLevel: val });\n    //      if (this.state.visible)\n    setTimeout(this.soundMeterProcess, 100);\n  };\n\n  startPreview = (permissionTestMode = false) => {\n    closeMediaStream(window.stream);\n    let audioSource = this.props.settings.selectedAudioDevice;\n    let videoSource = this.props.settings.selectedVideoDevice;\n    let videoElement, soundMeterProcess;\n    if (!permissionTestMode) {\n      videoElement = document.getElementById('previewVideo');\n      // this.soundMeter = window.soundMeter = new SoundMeter(window.audioContext);\n      // soundMeterProcess = this.soundMeterProcess;\n    }\n    let constraints = {\n      audio: !this.props.roomState.localAudioEnabled\n        ? true\n        : { deviceId: audioSource ? { exact: audioSource } : undefined },\n      video: !this.props.roomState.localVideoEnabled\n        ? true\n        : { deviceId: videoSource ? { exact: videoSource } : undefined },\n    };\n    getUserMedia(constraints)\n      .then(stream => {\n        if (!permissionTestMode) {\n          window.stream = stream; // make stream available to console\n          //videoElement.srcObject = stream;\n          attachMediaStream(videoElement, stream);\n          //TODO this throws an error when audio only is chosen. Handle it\n          // if (this.props.roomState.localAudioEnabled) {\n          //   soundMeter.connectToSource(stream);\n          //   setTimeout(soundMeterProcess, 100);\n          // }\n        }\n        return navigator.mediaDevices.enumerateDevices();\n        // Refresh button list in case labels have become available\n      })\n      .then(devices => {\n        //TODO combine with updateInputDevices\n        let videoDevices = [];\n        let audioDevices = [];\n        let audioOutputDevices = [];\n        for (let device of devices) {\n          if (device.kind === 'videoinput') {\n            videoDevices.push(device);\n          } else if (device.kind === 'audioinput') {\n            audioDevices.push(device);\n          } else if (device.kind === 'audiooutput') {\n            audioOutputDevices.push(device);\n          }\n        }\n        let data = { videoDevices, audioDevices, audioOutputDevices };\n        if (\n          this.props.settings.selectedAudioDevice === '' &&\n          data.audioDevices.length > 0\n        ) {\n          this.props.setSettings({\n            selectedAudioDevice: data.audioDevices[0].deviceId,\n          });\n        }\n        if (\n          this.props.settings.selectedVideoDevice === '' &&\n          data.videoDevices.length > 0\n        ) {\n          this.props.setSettings({\n            selectedVideoDevice: data.videoDevices[0].deviceId,\n          });\n        }\n        this.setState({\n          audioDevices: data.audioDevices,\n          videoDevices: data.videoDevices,\n          permissionGranted: true,\n          formStage: 'PREVIEW',\n        });\n      })\n      .catch(error => {\n        //TODO - look for only permission error. Rest of the errors should be handled\n        this.props.setLocalStreamError(error);\n        this.setState({\n          permissionGranted: false,\n          permissionText:\n            \"You won't be able to access the meeting unless you grant camera and mic permissions\",\n        });\n      });\n  };\n\n  updateDevice = (name, value) => {\n    this.props.setSettings(\n      {\n        [name]: value,\n      },\n      () => {\n        this.startPreview(false);\n      }\n    );\n  };\n\n  render() {\n    console.log(this.state.formStage);\n    const showEnv = !Boolean(process.env.NEXT_PUBLIC_SFU_ENV);\n    const showRoleSelect = Boolean(process.env.NEXT_PUBLIC_SFU_ENV);\n\n    return (\n      <>\n        {this.state.isSupported && (\n          <div className=\"relative z-0\">\n            {this.state.formStage && this.state.formStage === 'ROOM' && (\n              <>\n                <div\n                  className=\" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\"\n                  style={{\n                    backgroundColor: '#1a1619',\n                    minHeight: 'calc(100vh - 64px)',\n                  }}\n                >\n                  <div className=\"overflow-hidden justify-right items-right shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100\">\n                    <h2 className=\"mt-6 text-center text-3xl leading-9 font-extrabold text-gray-900 mb-2\">\n                      100ms Conference\n                    </h2>\n\n                    <div className=\"mt-6 space-y-2\">\n                      <button\n                        className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none transition duration-150 ease-in-out\"\n                        onClick={() => {\n                          this.setState({ formStage: 'CREATE_ROOM' });\n                        }}\n                      >\n                        Create Room\n                      </button>\n                      <button\n                        className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-indigo-600 bg-white hover:text-indigo-700 hover:border-indigo-700 focus:outline-none border-indigo-600 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                        onClick={() => {\n                          this.setState({ formStage: 'JOIN_ROOM' });\n                        }}\n                      >\n                        Join Room\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </>\n            )}\n\n            {!this.props.loginInfo.roomId &&\n              this.state.formStage &&\n              this.state.formStage === 'CREATE_ROOM' && (\n                <>\n                  <Formik\n                    initialValues={{\n                      roomName: '',\n                      displayName: this.props.loginInfo.displayName,\n                      env: process.env.NEXT_PUBLIC_SFU_ENV || 'prod-in',\n                      role: 'Host',\n                      isRecording: false,\n                    }}\n                    validate={values => {\n                      const errors = {};\n                      if (!values.displayName) {\n                        errors.displayName = 'Required';\n                      }\n                      if (!values.roomName) {\n                        errors.roomName = 'Required';\n                      }\n                      const validRoomPattern = /^[a-zA-Z0-9-.:_]*$/g;\n                      if (!validRoomPattern.test(values.roomName)) {\n                        errors.roomName =\n                          'Accepted characters are a-z, A-Z, 0-9, . - : _';\n                      }\n                      if (showEnv && !values.env) {\n                        errors.env = 'Required';\n                      }\n                      return errors;\n                    }}\n                    onSubmit={values => {\n                      this.setState({ formValues: values });\n                      this.handleCreateSubmit(values);\n                    }}\n                  >\n                    {({ errors, touched, initialValues }) => (\n                      <Form>\n                        <div\n                          className=\" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\"\n                          style={{\n                            backgroundColor: '#1a1619',\n                            minHeight: 'calc(100vh - 64px)',\n                          }}\n                        >\n                          <div className=\"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 p-6 bg-gray-100\">\n                            <div>\n                              <h2 className=\"text-center justify-center items-center text-3xl leading-9 font-extrabold text-gray-900 mb-2\">\n                                {initialValues && (\n                                  <>\n                                    <ArrowLeftIcon\n                                      className=\"text-gray-700 hover:text-black\"\n                                      onClick={() => {\n                                        this.setState({ formStage: 'ROOM' });\n                                        this.props.setLoginInfo({\n                                          roomId: '',\n                                        });\n                                      }}\n                                    />\n                                    100ms Conference\n                                  </>\n                                )}\n                              </h2>\n                            </div>\n                            <div className=\"rounded-m\">\n                              <div>\n                                <LoginTextField\n                                  label=\"Room Name\"\n                                  name=\"roomName\"\n                                  className=\"rounded-t-md\"\n                                  placeholder=\"Room Name\"\n                                  errors={errors.roomName}\n                                  touched={touched.roomName}\n                                />\n                              </div>\n                              <div className=\"-mt-px\">\n                                {initialValues && (\n                                  <LoginTextField\n                                    label=\"Username\"\n                                    name=\"displayName\"\n                                    className={\n                                      !(\n                                        initialValues && !initialValues.roomId\n                                      ) && 'rounded-t-md'\n                                    }\n                                    placeholder=\"Username\"\n                                    errors={errors.displayName}\n                                    touched={touched.displayName}\n                                  />\n                                )}\n                              </div>\n                              <div className=\"-mt-px\">\n                                {initialValues ? (\n                                  showRoleSelect ? (\n                                    <LoginTextField\n                                      label=\"Role\"\n                                      name=\"role\"\n                                      as={showRoleSelect ? 'select' : null}\n                                      className={!showEnv && 'rounded-b-md'}\n                                      placeholder=\"Role\"\n                                      disabled={\n                                        this.props.loginInfo.role ===\n                                        ROLES.VIEWER\n                                      }\n                                      errors={errors.role}\n                                      touched={touched.rol}\n                                    >\n                                      <option value=\"\">Select Role</option>\n                                      {Object.values(ROLES).map(\n                                        (role, index) => (\n                                          <option\n                                            key={index}\n                                            value={role}\n                                            className=\"capitalize\"\n                                          >\n                                            {role}\n                                          </option>\n                                        )\n                                      )}\n                                    </LoginTextField>\n                                  ) : (\n                                    <LoginTextField\n                                      label=\"Role\"\n                                      name=\"role\"\n                                      className={!showEnv && 'rounded-b-md'}\n                                      placeholder=\"Role\"\n                                      disabled={\n                                        this.props.loginInfo.role ===\n                                        ROLES.VIEWER\n                                      }\n                                      errors={errors.role}\n                                      touched={touched.rol}\n                                    />\n                                  )\n                                ) : null}\n                              </div>\n\n                              {showEnv && (\n                                <div className=\"-mt-px\">\n                                  {initialValues && (\n                                    <LoginTextField\n                                      label=\"Environment\"\n                                      name=\"env\"\n                                      className=\"rounded-b-md\"\n                                      placeholder=\"Environment (qa-in/staging-in/prod-in)\"\n                                      errors={errors.env}\n                                      touched={touched.env}\n                                    />\n                                  )}\n                                </div>\n                              )}\n                            </div>\n                            <div className=\"mt-6\">\n                              <label>\n                                <Field type=\"checkbox\" name=\"isRecording\" />\n                                {'  '} Record Room?\n                              </label>\n                            </div>\n\n                            <div className=\"mt-6\">\n                              <button\n                                type=\"submit\"\n                                className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                              >\n                                <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\"></span>\n                                Create Room\n                              </button>\n                            </div>\n                          </div>\n                        </div>\n                      </Form>\n                    )}\n                  </Formik>\n                </>\n              )}\n            {this.state.formStage && this.state.formStage === 'JOIN_ROOM' && (\n              <>\n                <Formik\n                  initialValues={{\n                    roomId: this.props.loginInfo.roomId\n                      ? this.props.loginInfo.roomId\n                      : '',\n                    displayName: this.props.loginInfo.displayName,\n                    env: this.props.loginInfo.env\n                      ? this.props.loginInfo.env\n                      : '',\n                    role: this.props.loginInfo.role\n                      ? this.props.loginInfo.role\n                      : 'Guest',\n                  }}\n                  validate={values => {\n                    const errors = {};\n                    if (!values.displayName) {\n                      errors.displayName = 'Required';\n                    }\n                    if (!values.roomId) {\n                      errors.roomId = 'Required';\n                    }\n                    if (showEnv && !values.env) {\n                      errors.env = 'Required';\n                    }\n                    return errors;\n                  }}\n                  onSubmit={values => {\n                    this.setState({ formValues: values });\n                    this.handleJoinSubmit(values);\n                  }}\n                >\n                  {({ errors, touched, initialValues }) => (\n                    <Form>\n                      <div\n                        className=\" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\"\n                        style={{\n                          backgroundColor: '#0B0F15',\n                          minHeight: 'calc(100vh - 64px)',\n                        }}\n                      >\n                        <div className=\"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 p-6 bg-gray-100\">\n                          <div>\n                            {/* <img className=\"mx-auto h-12 w-auto\" src={logo} /> */}\n\n                            <h2 className=\"text-center text-3xl leading-9 font-extrabold text-gray-900 mb-2\">\n                              {initialValues && (\n                                <>\n                                  <ArrowLeftIcon\n                                    className=\"text-gray-700 hover:text-black\"\n                                    onClick={() => {\n                                      this.setState({ formStage: 'ROOM' });\n                                      this.props.setLoginInfo({\n                                        roomId: '',\n                                      });\n                                    }}\n                                  />\n                                  100ms Conference\n                                </>\n                              )}\n                            </h2>\n                            {initialValues && initialValues.roomId && (\n                              <p className=\"my-2 text-center text-sm leading-5 text-gray-600\">\n                                You are about to join room:{' '}\n                                <span className=\"font-bold\">\n                                  {initialValues.roomId}\n                                </span>\n                              </p>\n                            )}\n                          </div>\n                          <div className=\"rounded-md\">\n                            <div>\n                              {initialValues && !initialValues.roomId && (\n                                <LoginTextField\n                                  label=\"Room ID\"\n                                  name=\"roomId\"\n                                  className=\"rounded-t-md\"\n                                  placeholder=\"Room ID\"\n                                  errors={errors.roomId}\n                                  touched={touched.roomId}\n                                />\n                              )}\n                            </div>\n                            <div className=\"-mt-px\">\n                              {initialValues && (\n                                <LoginTextField\n                                  label=\"Username\"\n                                  name=\"displayName\"\n                                  className={\n                                    !(initialValues && !initialValues.roomId) &&\n                                    'rounded-t-md'\n                                  }\n                                  placeholder=\"Username\"\n                                  errors={errors.displayName}\n                                  touched={touched.displayName}\n                                />\n                              )}\n                            </div>\n                            <div className=\"-mt-px\">\n                              {initialValues ? (\n                                showRoleSelect ? (\n                                  <LoginTextField\n                                    label=\"Role\"\n                                    name=\"role\"\n                                    as={showRoleSelect ? 'select' : null}\n                                    className={!showEnv && 'rounded-b-md'}\n                                    placeholder=\"Role\"\n                                    disabled={\n                                      this.props.loginInfo.role === ROLES.VIEWER\n                                    }\n                                    errors={errors.role}\n                                    touched={touched.rol}\n                                  >\n                                    <option value=\"\">Select Role</option>\n                                    {Object.values(ROLES).map((role, index) => (\n                                      <option\n                                        key={index}\n                                        value={role}\n                                        className=\"capitalize\"\n                                      >\n                                        {role}\n                                      </option>\n                                    ))}\n                                  </LoginTextField>\n                                ) : (\n                                  <LoginTextField\n                                    label=\"Role\"\n                                    name=\"role\"\n                                    className={!showEnv && 'rounded-b-md'}\n                                    placeholder=\"Role\"\n                                    disabled={\n                                      this.props.loginInfo.role === ROLES.VIEWER\n                                    }\n                                    errors={errors.role}\n                                    touched={touched.rol}\n                                  />\n                                )\n                              ) : null}\n                            </div>\n                            {showEnv && (\n                              <div className=\"-mt-px\">\n                                {initialValues && (\n                                  <LoginTextField\n                                    label=\"Environment\"\n                                    name=\"env\"\n                                    className=\"rounded-b-md\"\n                                    placeholder=\"Environment (qa-in/staging-in/prod-in)\"\n                                    errors={errors.env}\n                                    touched={touched.env}\n                                  />\n                                )}\n                              </div>\n                            )}\n                          </div>\n\n                          <div className=\"mt-6\">\n                            <button\n                              type=\"submit\"\n                              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                            >\n                              <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\"></span>\n                              Join Room\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </Form>\n                  )}\n                </Formik>\n              </>\n            )}\n            {this.state.formStage && this.state.formStage === 'PERMISSION' && (\n              <>\n                <div\n                  className=\" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\"\n                  style={{\n                    backgroundColor: '#1a1619',\n                    minHeight: 'calc(100vh - 64px)',\n                  }}\n                >\n                  <div className=\"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100 my-3\">\n                    <div className=\"\">\n                      <h2 className=\"mt-2 text-center text-3xl leading-9 font-extrabold text-gray-900\">\n                        100ms Conference\n                      </h2>\n\n                      <p className=\"mt-2 text-center text-sm leading-5 text-gray-600 mb-2\">\n                        {this.state.permissionText}\n                      </p>\n                      <div className=\"mt-6\">\n                        <button\n                          className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                          onClick={() => {\n                            this.startPreview(true);\n                          }}\n                        >\n                          <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\"></span>\n                          Prompt permission dialog\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </>\n            )}\n            {this.state.formStage && this.state.formStage === 'PREVIEW' && (\n              <>\n                <Formik\n                  initialValues={{\n                    selectedAudioDevice: this.props.settings\n                      ? this.props.settings.selectedAudioDevice\n                      : null,\n                    selectedVideoDevice: this.props.settings\n                      ? this.props.settings.selectedVideoDevice\n                      : null,\n                    // selectedAudioOutputDevice: this.state.settings\n                    //   ? this.state.settings.selectedAudioOutputDevice\n                    //   : null,\n                  }}\n                  validate={values => {\n                    const errors = {};\n                    // if (!values.displayName) {\n                    //   errors.displayName = 'Required';\n                    // }\n                    // if (!values.roomName){\n                    //   errors.roomName = 'Required';\n                    // }\n                    return errors;\n                  }}\n                  onSubmit={values => {\n                    if (window.stream) {\n                      closeMediaStream(window.stream);\n                    }\n                    this.handleSubmit(values);\n                  }}\n                >\n                  {({ values, initialValues }) => (\n                    <Form>\n                      <div\n                        className=\" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\"\n                        style={{\n                          backgroundColor: '#1a1619',\n                          minHeight: 'calc(100vh - 64px)',\n                        }}\n                      >\n                        <div className=\"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100 my-3\">\n                          <div className=\"\">\n                            <h2 className=\"mt-2 text-center text-3xl leading-9 font-extrabold text-gray-900\">\n                              <>100ms Conference</>\n                            </h2>\n                            <p className=\"mt-2 text-center text-sm leading-5 text-gray-600 mb-2\">\n                              You are about to join{' '}\n                              <span className=\"font-semibold\">\n                                {this.state.formValues\n                                  ? this.state.formValues.roomName\n                                  : this.props.loginInfo.roomName}\n                              </span>{' '}\n                              as{' '}\n                              <span className=\"font-semibold\">\n                                {this.state.formValues\n                                  ? this.state.formValues.displayName\n                                  : this.props.loginInfo.displayName}\n                              </span>\n                              <button\n                                className=\"rounded-md px-2 py-1 hover:bg-indigo-500 ml-1 border transition duration-150 ease-in-out\"\n                                onClick={() => {\n                                  this.setState({ formStage: 'JOIN_ROOM' });\n                                }}\n                              >\n                                Change\n                              </button>\n                            </p>\n                          </div>\n                          <div className=\"mb-3\">\n                            <div className=\"relative h-48 bg-black rounded-md mb-1\">\n                              <video\n                                id=\"previewVideo\"\n                                autoPlay\n                                playsInline\n                                muted={true}\n                                className={`rounded-md h-full w-full ${\n                                  !this.props.roomState.localVideoEnabled &&\n                                  'hidden'\n                                }`}\n                              ></video>\n                              {/* {(!this.props.roomState.localVideoEnabled) && (<div id='previewVideo' className=\"rounded-md mb-3 h-full w-full bg-black\"></div>)} */}\n                              <div className=\"absolute bottom-0 w-full flex justify-center pb-1\">\n                                <button\n                                  onClick={e => {\n                                    e.preventDefault();\n                                    const initialValue = this.props.roomState\n                                      .localVideoEnabled;\n                                    this.props.setRoomState({\n                                      localVideoEnabled: !initialValue,\n                                    });\n                                  }}\n                                  className={`py-1 px-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 active:bg-indigo-700 transition duration-150 ease-in-out ${\n                                    this.props.roomState.localVideoEnabled\n                                      ? 'bg-opacity-50 bg-gray-600'\n                                      : 'bg-indigo-600'\n                                  }`}\n                                >\n                                  {this.props.roomState.localVideoEnabled && (\n                                    <svg\n                                      className=\"w-6 h-6\"\n                                      fill=\"none\"\n                                      stroke=\"currentColor\"\n                                      viewBox=\"0 0 24 24\"\n                                      xmlns=\"http://www.w3.org/2000/svg\"\n                                    >\n                                      <path\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                        strokeWidth={2}\n                                        d=\"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z\"\n                                      />\n                                    </svg>\n                                  )}\n                                  {!this.props.roomState.localVideoEnabled && (\n                                    <svg\n                                      className=\"w-6 h-6\"\n                                      viewBox=\"0 0 24 24\"\n                                      fill=\"none\"\n                                      xmlns=\"http://www.w3.org/2000/svg\"\n                                    >\n                                      <path\n                                        d=\"M15 10L19.553 7.724C19.7054 7.64784 19.8748 7.61188 20.045 7.61955C20.2152 7.62721 20.3806 7.67825 20.5256 7.76781C20.6706 7.85736 20.7902 7.98248 20.8733 8.13127C20.9563 8.28007 20.9999 8.44761 21 8.618V15.382C20.9999 15.5524 20.9563 15.7199 20.8733 15.8687C20.7902 16.0175 20.6706 16.1426 20.5256 16.2322C20.3806 16.3218 20.2152 16.3728 20.045 16.3805C19.8748 16.3881 19.7054 16.3522 19.553 16.276L15 14V10ZM5 18H13C13.5304 18 14.0391 17.7893 14.4142 17.4142C14.7893 17.0391 15 16.5304 15 16V8C15 7.46957 14.7893 6.96086 14.4142 6.58579C14.0391 6.21071 13.5304 6 13 6H5C4.46957 6 3.96086 6.21071 3.58579 6.58579C3.21071 6.96086 3 7.46957 3 8V16C3 16.5304 3.21071 17.0391 3.58579 17.4142C3.96086 17.7893 4.46957 18 5 18Z\"\n                                        stroke=\"currentColor\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                      />\n                                      <line\n                                        x1=\"2.00177\"\n                                        y1=\"19.7113\"\n                                        x2=\"16.1289\"\n                                        y2=\"4.10676\"\n                                        stroke=\"currentColor\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                      />\n                                    </svg>\n                                  )}\n                                </button>\n\n                                <button\n                                  onClick={e => {\n                                    e.preventDefault();\n                                    const initialValue = this.props.roomState\n                                      .localAudioEnabled;\n                                    this.props.setRoomState({\n                                      localAudioEnabled: !initialValue,\n                                    });\n                                  }}\n                                  className={`ml-1 py-1 px-2 border border-transparent text-sm leading-5 font-medium rounded-md text-white hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out ${\n                                    this.props.roomState.localAudioEnabled\n                                      ? 'bg-opacity-50 bg-gray-600'\n                                      : 'bg-indigo-600'\n                                  }`}\n                                >\n                                  {this.props.roomState.localAudioEnabled && (\n                                    <svg\n                                      className=\"w-6 h-6\"\n                                      fill=\"none\"\n                                      stroke=\"currentColor\"\n                                      viewBox=\"0 0 24 24\"\n                                      xmlns=\"http://www.w3.org/2000/svg\"\n                                    >\n                                      <path\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                        strokeWidth=\"2\"\n                                        d=\"M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z\"\n                                      ></path>\n                                    </svg>\n                                  )}\n                                  {!this.props.roomState.localAudioEnabled && (\n                                    <svg\n                                      className=\"h-6 w-6\"\n                                      viewBox=\"0 0 24 24\"\n                                      fill=\"none\"\n                                      xmlns=\"http://www.w3.org/2000/svg\"\n                                    >\n                                      <path\n                                        d=\"M19 11C19 12.8565 18.2625 14.637 16.9497 15.9497C15.637 17.2625 13.8565 18 12 18M12 18C10.1435 18 8.36301 17.2625 7.05025 15.9497C5.7375 14.637 5 12.8565 5 11M12 18V22M12 22H8M12 22H16M12 14C11.2044 14 10.4413 13.6839 9.87868 13.1213C9.31607 12.5587 9 11.7956 9 11V5C9 4.20435 9.31607 3.44129 9.87868 2.87868C10.4413 2.31607 11.2044 2 12 2C12.7956 2 13.5587 2.31607 14.1213 2.87868C14.6839 3.44129 15 4.20435 15 5V11C15 11.7956 14.6839 12.5587 14.1213 13.1213C13.5587 13.6839 12.7956 14 12 14Z\"\n                                        stroke=\"currentColor\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                      />\n                                      <line\n                                        x1=\"4.43121\"\n                                        y1=\"18.0549\"\n                                        x2=\"18.5583\"\n                                        y2=\"2.45033\"\n                                        stroke=\"currentColor\"\n                                        strokeWidth=\"2\"\n                                        strokeLinecap=\"round\"\n                                        strokeLinejoin=\"round\"\n                                      />\n                                    </svg>\n                                  )}\n                                </button>\n                              </div>\n                            </div>\n                            {this.props.roomState.localAudioEnabled && (\n                              <div className=\"px-1\">\n                                <div\n                                  style={{\n                                    width: !this.props.roomState\n                                      .localAudioEnabled\n                                      ? '1px'\n                                      : this.state.audioLevel + 'px',\n                                    height: '4px',\n                                    backgroundColor: '#8dc63f',\n                                  }}\n                                ></div>\n                              </div>\n                            )}\n                          </div>\n                          <div className=\"rounded-md shadow-sm\">\n                            <div>\n                              {initialValues && (\n                                <Field\n                                  label=\"Audio Input\"\n                                  name=\"selectedAudioDevice\"\n                                  className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5\"\n                                  placeholder=\"Audio Input\"\n                                  component={SingleSelect}\n                                  options={this.state.audioDevices}\n                                  updateDevice={this.updateDevice}\n                                />\n                              )}\n                            </div>\n                            <div className=\"-mt-px\">\n                              {initialValues && (\n                                <Field\n                                  label=\"Video Input\"\n                                  name=\"selectedVideoDevice\"\n                                  className={`appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5`}\n                                  placeholder=\"Video Input\"\n                                  component={SingleSelect}\n                                  options={this.state.videoDevices}\n                                  updateDevice={this.updateDevice}\n                                />\n                              )}\n                            </div>\n                            {/* <div className=\"-mt-px\">\n                          {initialValues && (\n                            <Field\n                              label=\"Autio Output\"\n                              name=\"selectedAudioOutputDevice\"\n                              className={`appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-sm sm:leading-5`}\n                              placeholder=\"Audio Output\"\n                              component={SingleSelect}\n                              options={this.state.audioOutputDevices}\n                              updateDevice={this.updateDevice}\n                            />\n                          )}\n                        </div> */}\n                          </div>\n\n                          <div className=\"mt-0\">\n                            <button\n                              type=\"submit\"\n                              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-500 focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                            >\n                              <span className=\"absolute left-0 inset-y-0 flex items-center pl-3\"></span>\n                              Join\n                            </button>\n                          </div>\n                        </div>\n                      </div>\n                    </Form>\n                  )}\n                </Formik>\n              </>\n            )}\n          </div>\n        )}\n        {!this.state.isSupported && (\n          <>\n            <div\n              className=\" flex items-center justify-center w-full px-4 sm:px-6 lg:px-8\"\n              style={{\n                backgroundColor: '#1a1619',\n                minHeight: 'calc(100vh - 64px)',\n              }}\n            >\n              <div className=\"overflow-hidden shadow rounded-lg max-w-sm w-full px-4 py-5 p-6 bg-gray-100 my-3\">\n                <div className=\"\">\n                  <h2 className=\"mt-2 text-center text-3xl leading-9 font-extrabold text-gray-900\">\n                    100ms Conference\n                  </h2>\n\n                  <p className=\"mt-2 text-center text-sm leading-5 text-gray-600 mb-2\">\n                    {deviceSupport().failureCause == 'iOS' ? (\n                      <span>\n                        100ms users might face issues on iOS devices. Please\n                        open the link on another device for the best experience.\n                        If you wish to continue on iOS, click continue.\n                      </span>\n                    ) : (\n                      <span>\n                        We recommend using Google Chrome for the best\n                        experience.\n                      </span>\n                    )}\n                  </p>\n                  <div className=\"mt-6\">\n                    {deviceSupport().failureCause == 'browser' && (\n                      <a\n                        className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 hover:text-white focus:outline-none focus:border-indigo-700 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out\"\n                        href=\"https://www.google.com/chrome/\"\n                        target=\"_blank\"\n                      >\n                        Download Google Chrome\n                      </a>\n                    )}\n                    <button\n                      className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm leading-5 font-medium rounded-md text-indigo-600 bg-white hover:text-indigo-700 hover:border-indigo-700 focus:outline-none border-indigo-600 focus:shadow-outline-indigo active:bg-indigo-700 transition duration-150 ease-in-out mt-3\"\n                      onClick={() => this.setState({ isSupported: true })}\n                    >\n                      Continue in current browser\n                    </button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </>\n        )}\n      </>\n    );\n  }\n}\n\nfunction objToStrMap(obj) {\n  const strMap = new Map();\n  for (const k of Object.keys(obj)) {\n    strMap.set(k, obj[k]);\n  }\n  return strMap;\n}\n\nconst WrappedLoginForm = LoginForm;\n//const WrappedLoginForm = Form.create({ name: \"login\" })(LoginForm);\nexport default WrappedLoginForm;\n"]},"metadata":{},"sourceType":"module"}